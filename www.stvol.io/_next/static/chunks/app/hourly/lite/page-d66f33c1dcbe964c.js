(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14833],{88088:function(e,t,r){Promise.resolve().then(r.bind(r,23702))},23702:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var s=r(57437),l=r(16278),n=r(25613),a=r(70567),i=r(91825),d=r(2265),o=r(76230),c=r(54520),x=r(76769),u=r(31716),f=r(22594),m=r(43425),p=r(21216),h=r(77102),b=r(4815),v=r(64940),y=r(66648),j=r(24302),w=r(91781),N=r(8581),g=r(48545);function F(e){let{epoch:t,strike:r,position:l,onClose:n}=e,{product:a}=(0,o.i)(),f=(0,x.M)(),F=null==f?void 0:f.address,[k,L]=(0,d.useState)(""),[O,P]=(0,d.useState)(!1),[C,S]=(0,d.useState)(r),[E,Z]=(0,d.useState)(l),[z,B]=(0,d.useState)(1),[_,M]=(0,d.useState)(!1),[T,U]=(0,d.useState)(!1),[I,Y]=(0,d.useState)(!1),[H,A]=(0,d.useState)({}),{data:D,mutate:W}=(0,c.FW)(null!=F?F:""),q=(0,c.sb)(D),{connect:R}=(0,b.W)(),$=(0,j.DU)(),V=(0,v.l)();console.log($);let X=async()=>{try{L("loading..");let e=await (0,c.G7)(t||0,a.id,C,E==i.Ly.Over?"under":"over",z),r=e.unit,s=e.price;z==r?L(Math.ceil(s/r)):z>r&&L("N/A")}catch(e){L("")}},G=async(e,t,r,s,l)=>{if(!F){await R({client:j.Lp,appMetadata:j.EY,chains:j.p5,wallets:j.fh});return}if($){V((0,h.sX)()).catch(()=>{});return}await (0,c.Xx)(f),M(!0);try{if(!F){console.log("no address");return}let d=await (0,c.s1)(e,a.id,t,F,"market",0===r?"over":"under",l,s);(e=>{if(e.result){let t=JSON.parse(e.result);t.type=e.type,A(t),U(!0),(0,u.j8)("OpenPositionPopup")}})(d),console.info("placeMarketOrder call successs",d),g.n.track("Order Placed",{"User Address":F,"Round Epoch":e,"Product Id":a.id,"Order Strike":t,"Order Position":0===r?"Over":"Under","Order Type":i.mr.Market,"Order Unit":l,"Order Price":s,Component:"Hourly/Lite"}),L(""),(0,u.j8)("refetch"),setTimeout(()=>{U(!1),n()},1500)}catch(e){console.error("contract call failure",e),(0,m.Sm)(e)}M(!1)},J="number"==typeof z&&z>0,K="number"==typeof k&&k>0,Q=()=>"N/A"==k,ee=!_&&(!q||q<1||J&&K&&q<Math.ceil(k)*z);return(0,d.useEffect)(()=>{X()},[r,l]),(0,s.jsxs)("div",{className:"flex flex-col w-[90%] md:w-[408px] bg-navy-30  gap-4 rounded-2xl py-5 min-h-[349px] mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between px-5 text-[22px]",children:[(0,s.jsx)("span",{children:"Order summary"}),(0,s.jsx)(y.default,{className:"cursor-pointer",src:"/orderpopup_close.svg",width:24,height:24,alt:"Close",onClick:n})]}),(0,s.jsx)("div",{className:"mt-6 px-5",children:(0,s.jsxs)("ul",{className:"rounded-2xl px-4 py-4 bg-navy-20",children:[(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Position"}),(0,s.jsx)("p",{className:E==i.Ly.Under?"text-red-100":"text-green-100",children:E})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Pay"}),(0,s.jsx)("p",{children:"number"==typeof z&&z>0&&"number"==typeof k&&k>0?"$"+(0,m.Y4)(z*k,0):"..."})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"If wins"}),(0,s.jsx)("p",{children:"$100"})]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Payout"}),(0,s.jsx)("p",{children:"number"==typeof k&&k>0?(0,m.Y4)(100/k,1==k?0:k>=10?2:1)+"x":"..."})]})})]})}),(0,s.jsxs)("div",{className:"flex flex-row gap-4 px-5",children:[ee&&(0,s.jsx)("button",{className:"font-semibold rounded-full w-full h-14 px-5 py-2 mt-6 disabled:bg-yellow-40 bg-yellow-100  hover:bg-yellow-50 text-black",onClick:async()=>{g.n.track("Button Clicked",{"Button Name":F?"Deposit":"Connect",Component:"LiteOrderPopup"}),F?Y(!0):await R({client:j.Lp,appMetadata:j.EY,chains:j.p5,wallets:j.fh})},children:F?"Deposit":"Connect"}),(0,s.jsx)("button",{disabled:Q()||"number"==typeof z&&"number"==typeof k&&"number"==typeof q&&z*k>q||ee||_||!(J&&K),onClick:async()=>{!Q()&&(_||(g.n.track("Button Clicked",{"Button Name":$?"Switch Network":"Submit Order",Component:"LiteOrderPopup"}),G(t,r,E===i.Ly.Over?0:1,parseInt(k),z)))},className:"font-semibold rounded-full w-full text-gray-0 h-14 px-5 py-2 mt-6 disabled:bg-yellow-40 "+(Q()?"bg-yellow-100  text-black border hover:text-gray-0 hover:bg-yellow-50":"bg-yellow-100  hover:bg-yellow-50 text-black"),children:Q()?"N/A":_?"Loading...":$?"Switch Network":"Submit Order"})]}),(0,s.jsx)(p.Z,{show:T,"aria-labelledby":"modal-1-label",onHide:()=>U(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[400]"}),className:"fixed z-[401] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full md:w-auto ",children:(0,s.jsx)(w.Z,{onClose:()=>U(!1),data:H})}),(0,s.jsx)(p.Z,{show:I,"aria-labelledby":"modal-deposit-label",onHide:()=>Y(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[300]"}),className:"fixed z-[301] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full ",children:(0,s.jsx)(N.Z,{onClose:()=>Y(!1)})})]})}var k=r(66516),L=r(9865);function O(){let{product:e}=(0,o.i)(),t=(0,x.M)(),r=null==t?void 0:t.address,{data:l,isLoading:n}=(0,c.qZ)(),{data:b,mutate:v}=(0,c.ay)(l||0,e.id),[y,j]=(0,d.useState)(i.Ly.Over),[w,N]=(0,d.useState)(""),[O,S]=(0,d.useState)(!1),{data:E=0}=(0,c.vL)(null!=r?r:"",(null==b?void 0:b.epoch)||0,void 0,h.Tk),{data:Z,error:z,isLoading:B,mutate:_}=(0,c.qi)((null==b?void 0:b.epoch)||0,e.id,h.Tk,1),{data:M,mutate:T}=(0,c.E7)(r,null!=l?l:0);(0,d.useEffect)(()=>{let e=(0,u.Ld)("refetch",T);return()=>{(0,u.r1)(e)}},[T]),(0,d.useEffect)(()=>{let e=(0,u.Ld)("refetch",()=>{B||_()});return()=>{(0,u.r1)(e)}},[B,_]);let U=(e,t)=>{if(e){let r=e.find(e=>e.strike===t);if(r)return r}return{strike:t,overPrice:0,underPrice:0}},I=e=>{N(e)};(0,d.useEffect)(()=>{if(!b)return;let e=null==Z?void 0:Z.slice().map(e=>{let t=y==i.Ly.Over?e.overPrice:e.underPrice;return{strike:e.strike,orderPrice:t}}).filter(e=>e.orderPrice>0).sort((e,t)=>e.orderPrice-t.orderPrice);if(e&&(!w||w.split("-")[1]!=y)){var t;N((null===(t=e[0])||void 0===t?void 0:t.strike)+"-"+y)}},[b,y,Z]),(0,d.useEffect)(()=>{(0,u.j8)("position",y)},[y]);let Y=b&&(null===h.Tk||void 0===h.Tk?void 0:h.Tk.reduce((e,t)=>(e.components.push((0,s.jsx)(C,{round:b,data:U(Z,t),strike:t,position:y,selectedPayoutOrderKey:w,onClickPayout:I},t)),e),{components:[],prevValue:f.O$.from("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF")}).components),[H,A]=(0,d.useState)(!0),[D,W]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let e=()=>{W(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[16px] font-normal text-gray-50",children:"Round"})," ",(0,s.jsx)("span",{className:"text-gray-99 text-md font-semibold",children:l?"#"+l:""})]}),(0,s.jsx)(k.Z,{timeinsecond:(null==b?void 0:b.endTimestamp)-new Date().getTime()/1e3})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(a.O,{selected:y,setter:()=>{j(y==i.Ly.Over?i.Ly.Under:i.Ly.Over)},bgcolor:"bg-navy-0"})}),(0,s.jsx)("div",{className:"flex justify-between mt-4 gap-2 ",children:Y}),(0,s.jsx)("div",{className:(0,m.cn)("mt-4 gap-3 min-h-[26px]"),children:r&&(0,s.jsxs)("div",{className:"flex mt-2 justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center text-xs text-gray-50",children:["Estimated PnL"," ",(0,s.jsx)("span",{className:"text-sm ml-1 "+(0==E?"text-gray-99":(0,m.YN)(E>0)),children:(0,m.ll)(E,0)})]}),(0,s.jsx)(L.Z,{})]})}),(0,s.jsx)("button",{onClick:()=>{g.n.track("Button Clicked",{"Button Name":"Order",Component:"LiteOrderInterface"}),S(!0)},disabled:!b||0==parseInt(b.startPrice),className:"font-semibold rounded-full w-full text-gray-0 h-14 px-5 py-2 mt-4 md:mt-6 disabled:bg-yellow-40 "+(""!==w&&"bg-yellow-100  text-black border hover:text-gray-0 hover:bg-yellow-50"),children:b&&0!=parseInt(b.startPrice)?"Order":"N/A"}),(0,s.jsx)(p.Z,{show:O,"aria-labelledby":"modal-1-label",onHide:()=>S(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[300]"}),className:"fixed z-[301] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full ",children:(0,s.jsx)(F,{epoch:null==b?void 0:b.epoch,strike:parseInt(w.split("-")[0],10),position:P[w.split("-")[1]],onClose:()=>S(!1)})})]})}let P={Under:i.Ly.Under,Over:i.Ly.Over};function C(e){let{round:t,strike:r,data:l,position:n,selectedPayoutOrderKey:a,onClickPayout:o}=e,c=(0,d.useRef)(null),x=n==i.Ly.Over?l.overPrice:l.underPrice,f=r+"-"+n,p="N/A";"number"==typeof x&&x>0&&(p=(0,m.Y4)(100/x,1==x?0:x>=10?2:1)+"x");let h={[i.Ly.Under]:"bg-red-50 border-red-100",[i.Ly.Over]:"bg-green-50 border-green-100"},b={[i.Ly.Under]:"hover:bg-red-50 hover:border-red-100",[i.Ly.Over]:"hover:bg-green-50 hover:border-green-100"};return(0,s.jsx)("div",{className:(0,m.cn)(f==a?h[n]:"bg-navy-20 border-navy-60","flex-1 text-center text-[13px] px-2 py-1 border rounded-full cursor-pointer "+b[n]),onClick:()=>{o(f),(0,u.j8)("showPayout",r,n)},ref:c,children:p})}var S=r(81758),E=r(183),Z=r(96089);function z(e){let{children:t}=e,{address:r}=(0,x.M)()||{},[l,n]=(0,d.useState)(!1),[a,i]=(0,d.useState)(!0),[o,f]=(0,d.useState)(!1),{data:p,isLoading:b}=(0,c.qZ)(),{data:v=0}=(0,c.vL)(null!=r?r:"",p||0,void 0,h.Tk);return(0,d.useEffect)(()=>{let e=(0,u.Ld)("OpenOrderPopup",()=>{i(!0)}),t=(0,u.Ld)("CloseOrderPopup",()=>{i(!1)}),r=(0,u.Ld)("ClosePositionPopup",()=>{f(!1)});return()=>{(0,u.r1)(e),(0,u.r1)(t),(0,u.r1)(r)}},[]),(0,d.useEffect)(()=>{let e=()=>{n(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)("div",{className:"fixed -bottom-1 left-0 z-[200] w-full"+(a?" animate-expand-to-center":""),children:(0,s.jsxs)("div",{className:"relative bg-navy-40 rounded-t-2xl px-4 pb-6 pt-3",children:[(0,s.jsxs)("div",{className:"h-[16px] rounded-t-2xl",children:[!a&&(0,s.jsx)("div",{className:"flex flex-row",children:(0,s.jsxs)("div",{className:"flex w-[100px] flex-row rounded-2xl bg-navy-0 px-4 py-1 cursor-pointer",onClick:()=>{(0,u.j8)("OpenPositionPopup")},children:[(0,s.jsx)("div",{className:"flex-1 text-sm text-accent",children:"PnL"}),(0,s.jsx)("div",{className:"text-sm "+(0==v?"text-gray-99":(0,m.YN)(v>0)),children:(0,m.ll)(v,0)})]})}),(0,s.jsx)("div",{className:"absolute left-1/2 top-[12px] flex -translate-x-1/2 transform cursor-pointer items-center justify-center text-gray-50",onClick:()=>i(!a),children:(0,s.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-tertiary",children:(0,s.jsx)(y.default,{className:(a?"-scale-y-100 transform":"")+" opacity-50 hover:opacity-100",src:"/liteorder_arrow_up.svg",alt:"liteorder_arrow",width:20,height:20})})})]}),a&&t]})}),!l&&(0,s.jsx)("div",{className:"flex min-w-[360px] flex-col gap-2",children:(0,s.jsx)("div",{className:"relative bg-navy-30 rounded-t-2xl md:rounded-2xl px-4 pt-10 pb-5 md:py-4",children:t})})]})}var B=r(80614),_=r(75209),M=r(82798);function T(){let[e,t]=(0,d.useState)(!1),{address:r}=(0,x.M)()||{};return(0,d.useEffect)(()=>{g.n.track("Page Viewed",{"Page Name":"Hourly/Lite"})},[]),(0,s.jsxs)("main",{className:"flex md:pt-6 flex-row items-start justify-between min-h-screen",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"flex flex-1 flex-col px-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 md:gap-11",children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between h-[45px] md:h-[66px]",children:[(0,s.jsx)(B.Z,{}),(0,s.jsx)(_.Y,{})]}),(0,s.jsx)(M.Z,{className:"flex",chartType:"lite"})]}),(0,s.jsx)(z,{children:(0,s.jsx)(O,{})})]})}),(0,s.jsxs)("div",{className:"px-4",children:[(0,s.jsx)(S.Z,{}),(0,s.jsx)(E.Z,{address:r})]}),(0,s.jsx)(Z.Z,{})]}),(0,s.jsx)(n.Z,{}),(0,s.jsx)("button",{className:"fixed bottom-12 right-4 z-50 md:hidden p-2",onClick:()=>{g.n.track("Button Clicked",{"Button Name":"Chat Icon Mobile",Component:"Hourly/Lite"}),t(!0)},children:(0,s.jsx)(y.default,{src:"/chat_icon_mobile.svg",width:52,height:52,alt:"Chat"})}),(0,s.jsx)(p.Z,{show:e,"aria-labelledby":"modal-2-label",onHide:()=>t(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[300]"}),className:"fixed z-[300] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full",children:(0,s.jsx)(l.Z,{onClose:()=>t(!1)})})]})}}},function(e){e.O(0,[49638,16603,8310,27508,92960,36452,96244,9109,8885,66648,25787,36586,23680,87138,42988,83131,9686,59807,45902,85055,54038,66472,52758,22307,81155,13979,91199,92971,47023,1744],function(){return e(e.s=88088)}),_N_E=e.O()}]);