"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91199],{16278:function(e,t,r){r.d(t,{Z:function(){return i}});var s=r(57437),n=r(55367);function i(e){let{onClose:t}=e;return(0,s.jsx)("div",{className:"flex flex-col w-[95vw] h-[85vh] bg-panel mx-auto rounded-2xl",children:(0,s.jsx)(n.Z,{onCloseClick:t})})}},25613:function(e,t,r){r.d(t,{Z:function(){return a}});var s=r(57437),n=r(66648),i=r(2265),o=r(55367),l=r(48545);function a(){let[e,t]=(0,i.useState)(!0);return e?(0,s.jsx)("div",{className:"hidden md:sticky md:block md:w-[310px] h-[calc(100vh-106px)] top-4 ",children:(0,s.jsx)(o.Z,{onCloseClick:()=>{t(!1)}})}):(0,s.jsx)("button",{className:"hidden md:block p-2",onClick:()=>{l.n.track("Button Clicked",{"Button Name":"Chat Icon Mobile",Component:"ChatSide"}),t(!0)},children:(0,s.jsx)(n.default,{src:"/chat_icon_mobile.svg",width:52,height:52,alt:"Chat"})})}},55367:function(e,t,r){var s=r(57437),n=r(66648),i=r(58744),o=r.n(i),l=r(3212),a=r(57818),d=r(76769);function c(e){var t;let{onCloseClick:r}=e;return null===(t=(0,d.M)())||void 0===t||t.address,(0,s.jsxs)("div",{className:"flex flex-col rounded-2xl w-full h-full bg-panel "+o().className,children:[(0,s.jsxs)("div",{className:"flex flex-row p-4",children:[(0,s.jsx)(n.default,{className:"mr-2",src:"/chat_bubble.svg",width:20,height:20,alt:"Chat"}),(0,s.jsx)("p",{className:"flex-1",children:"Chat"}),(0,s.jsx)(n.default,{className:"cursor-pointer",src:"/chat_close.svg",width:16,height:16,alt:"Close",onClick:r})]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(l.Z,{server:"1198851969519980584",channel:"1198851969519980590",shard:"https://emerald.widgetbot.io",width:"100%",height:"100%"})})]})}let u=(0,a.default)(()=>Promise.resolve(c),{ssr:!1});t.Z=u},82798:function(e,t,r){r.d(t,{Z:function(){return W}});var s=r(57437),n=r(2265);let i=()=>{let[e,t]=(0,n.useState)();return{data:e,setChartData:(0,n.useCallback)(e=>{t(e)},[])}},o=(0,n.createContext)({data:void 0,setChartData:e=>{}}),l=()=>(0,n.useContext)(o);var a=r(81673);let d="https://benchmarks.pyth.network/v1/shims/tradingview",c=new Map,u={supported_resolutions:["1","60","D","1D"],supports_group_request:!1,supports_marks:!1,supports_search:!1,supports_timescale_marks:!1};var h={onReady:e=>{console.log("[onReady]: Method call"),setTimeout(()=>e(u))},searchSymbols:(e,t,r,s)=>{console.log("[searchSymbols]: Method call"),fetch("".concat(d,"/search?query=").concat(e)).then(e=>{e.json().then(e=>{s(e)})})},resolveSymbol:(e,t,r)=>{console.log("[resolveSymbol]: Method call",e),fetch("".concat(d,"/symbols?symbol=").concat(e)).then(s=>{s.json().then(e=>{console.log("[resolveSymbol]: Symbol resolved",e),t(e)}).catch(t=>{console.log("[resolveSymbol]: Cannot resolve symbol",e),r("Cannot resolve symbol")})}).catch(t=>{console.log("[resolveSymbol] Error Method call",e)})},getBars:(e,t,r,s,n)=>{let{from:i,to:o,firstDataRequest:l}=r;console.log("[getBars]: Method call",e,t,i,o),fetch("".concat(d,"/history?symbol=").concat(e.ticker,"&from=").concat(r.from,"&to=").concat(r.to,"&resolution=").concat(t)).then(t=>{t.json().then(t=>{if(0===t.t.length){s([],{noData:!0});return}let r=[];for(let e=0;e<t.t.length;++e)r.push({time:1e3*t.t[e],low:t.l[e],high:t.h[e],open:t.o[e],close:t.c[e]});l&&c.set(e.ticker,{...r[r.length-1]}),s(r,{noData:!1})}).catch(e=>{console.log("[getBars]: Get error",e),n(e)})})},subscribeBars:(e,t,r,s,n)=>{console.log("[subscribeBars]: Method call with subscriberUID:",s),(0,a.vz)(e,t,r,s,n,c.get(e.ticker))},unsubscribeBars:e=>{console.log("[unsubscribeBars]: Method call with subscriberUID:",e),(0,a.rh)(e)}},x=r(66648),m=function(e){function t(e,r){let s={...e};for(let n in r)"object"!=typeof e[n]||null===e[n]||Array.isArray(e[n])?void 0!==r[n]&&(s[n]=r[n]):s[n]=t(e[n],r[n]);return s}let r={width:800,height:500,interval:"1D",timezone:"Etc/UTC",container:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,news:!1,datawindow:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"1W"},{text:"1y",resolution:"1W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[],indicators:[],drawingTools:[]}},s=JSON.parse('[{"iso":"ar","dir":"rtl","language":"ar"},{"iso":"pt","dir":"ltr","language":"pt"},{"iso":"ca","dir":"ltr","language":"ca_ES"},{"iso":"cs","dir":"ltr","language":"cs"},{"iso":"de","dir":"ltr","language":"de"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"es","dir":"ltr","language":"es"},{"iso":"fa","dir":"rtl","language":"fa"},{"iso":"fr","dir":"ltr","language":"fr"},{"iso":"he","dir":"rtl","language":"he_IL"},{"iso":"hu","dir":"ltr","language":"hu_HU"},{"iso":"id","dir":"ltr","language":"id_ID"},{"iso":"en","dir":"ltr","language":"en"},{"iso":"it","dir":"ltr","language":"it"},{"iso":"ja","dir":"ltr","language":"ja"},{"iso":"ko","dir":"ltr","language":"ko"},{"iso":"ms","dir":"ltr","language":"ms_MY"},{"iso":"pl","dir":"ltr","language":"pl"},{"iso":"ru","dir":"ltr","language":"ru"},{"iso":"sv","dir":"ltr","language":"sv"},{"iso":"th","dir":"ltr","language":"th"},{"iso":"tr","dir":"ltr","language":"tr"},{"iso":"vi","dir":"ltr","language":"vi"},{"iso":"zh-Hans","dir":"ltr","language":"zh"},{"iso":"zh-Hant","dir":"ltr","language":"zh_TW"},{"iso":"el","dir":"ltr","language":"el"},{"iso":"nl","dir":"ltr","language":"nl_NL"},{"iso":"ro","dir":"ltr","language":"ro"}]'),n=!1;function i(){return"CL v25.000 (internal id 1394882f @ 2023-05-22T15:05:42.670Z)"}let o=class{setDebugMode(e){this._innerAPI().setDebugMode(e)}onChartReady(e){this._ready?e.call(this):this._readyHandlers.push(e)}headerReady(){return this._innerWindowLoaded.then(()=>this._innerWindow().headerReady())}onGrayedObjectClicked(e){this._doWhenInnerApiLoaded(t=>{t.onGrayedObjectClicked(e)})}onShortcut(e,t){this._doWhenInnerWindowLoaded(r=>{r.createShortcutAction(e,t)})}subscribe(e,t){this._doWhenInnerApiLoaded(r=>{r.subscribe(e,t)})}unsubscribe(e,t){this._doWhenInnerApiLoaded(r=>{r.unsubscribe(e,t)})}chart(e){return this._innerAPI().chart(e)}getLanguage(){return this._options.locale}setSymbol(e,t,r){this._innerAPI().changeSymbol(e,t,r)}remove(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)}closePopupsAndDialogs(){this._doWhenInnerApiLoaded(e=>{e.closePopupsAndDialogs()})}selectLineTool(e,t){this._innerAPI().selectLineTool(e,t)}selectedLineTool(){return this._innerAPI().selectedLineTool()}save(e){this._innerAPI().saveChart(e)}load(e,t){this._innerAPI().loadChart({json:e,extendedData:t})}getSavedCharts(e){this._innerAPI().getSavedCharts(e)}loadChartFromServer(e){this._innerAPI().loadChartFromServer(e)}saveChartToServer(e,t,r){this._innerAPI().saveChartToServer(e,t,r)}removeChartFromServer(e,t){this._innerAPI().removeChartFromServer(e,t)}onContextMenu(e){this._doWhenInnerApiLoaded(t=>{t.onContextMenu(e)})}createButton(e){return this._innerWindow().createButton(e)}createDropdown(e){return this._innerWindow().createDropdown(e)}showNoticeDialog(e){this._doWhenInnerApiLoaded(t=>{t.showNoticeDialog(e)})}showConfirmDialog(e){this._doWhenInnerApiLoaded(t=>{t.showConfirmDialog(e)})}showLoadChartDialog(){this._innerAPI().showLoadChartDialog()}showSaveAsChartDialog(){this._innerAPI().showSaveAsChartDialog()}symbolInterval(){return this._innerAPI().getSymbolInterval()}mainSeriesPriceFormatter(){return this._innerAPI().mainSeriesPriceFormatter()}getIntervals(){return this._innerAPI().getIntervals()}getStudiesList(){return this._innerAPI().getStudiesList()}getStudyInputs(e){return this._innerAPI().getStudyInputs(e)}getStudyStyles(e){return this._innerAPI().getStudyStyles(e)}addCustomCSSFile(e){this._innerWindow().addCustomCSSFile(e)}applyOverrides(e){this._options=t(this._options,{overrides:e}),this._doWhenInnerWindowLoaded(t=>{t.applyOverrides(e)})}applyStudiesOverrides(e){this._doWhenInnerWindowLoaded(t=>{t.applyStudiesOverrides(e)})}watchList(){return this._innerAPI().watchlist()}news(){return this._innerAPI().news()}widgetbar(){return this._innerAPI().widgetbar()}activeChart(){return this._innerAPI().activeChart()}setActiveChart(e){return this._innerAPI().setActiveChart(e)}chartsCount(){return this._innerAPI().chartsCount()}layout(){return this._innerAPI().layout()}setLayout(e){this._innerAPI().setLayout(e)}layoutName(){return this._innerAPI().layoutName()}changeTheme(e,t){return this._innerWindow().changeTheme(e,t)}getTheme(){return this._innerWindow().getTheme()}takeScreenshot(){this._doWhenInnerApiLoaded(e=>{e.takeScreenshot()})}lockAllDrawingTools(){return this._innerAPI().lockAllDrawingTools()}hideAllDrawingTools(){return this._innerAPI().hideAllDrawingTools()}drawOnAllCharts(e){this._innerAPI().drawOnAllCharts(e)}magnetEnabled(){return this._innerAPI().magnetEnabled()}magnetMode(){return this._innerAPI().magnetMode()}undoRedoState(){return this._innerAPI().undoRedoState()}setIntervalLinkingEnabled(e){this._innerAPI().setIntervalLinkingEnabled(e)}setTimeFrame(e){this._innerAPI().setTimeFrame(e)}symbolSync(){return this._innerAPI().symbolSync()}intervalSync(){return this._innerAPI().intervalSync()}crosshairSync(){return this._innerAPI().crosshairSync()}timeSync(){return this._innerAPI().timeSync()}dateRangeSync(){return this._innerAPI().dateRangeSync()}setFeatureEnabled(e,t){this._innerAPI().setFeatureEnabled(e,t)}getAllFeatures(){return this._innerWindow().getAllFeatures()}clearUndoHistory(){return this._innerAPI().clearUndoHistory()}undo(){return this._innerAPI().undo()}redo(){return this._innerAPI().redo()}startFullscreen(){this._innerAPI().startFullscreen()}exitFullscreen(){this._innerAPI().exitFullscreen()}takeClientScreenshot(e){return this._innerAPI().takeClientScreenshot(e)}navigationButtonsVisibility(){return this._innerWindow().getNavigationButtonsVisibility()}paneButtonsVisibility(){return this._innerWindow().getPaneButtonsVisibility()}dateFormat(){return this._innerWindow().getDateFormat()}timeHoursFormat(){return this._innerWindow().getTimeHoursFormat()}currencyAndUnitVisibility(){return this._innerWindow().getCurrencyAndUnitVisibility()}supportedChartTypes(){return this._innerAPI().supportedChartTypes()}linking(){return this._innerAPI().linking}_innerAPI(){return this._innerWindow().tradingViewApi}_innerWindow(){return this._iFrame.contentWindow}_doWhenInnerWindowLoaded(e){this._ready?e(this._innerWindow()):this._innerWindowLoaded.then(()=>{e(this._innerWindow())})}_doWhenInnerApiLoaded(e){this._doWhenInnerWindowLoaded(t=>{t.doWhenApiIsReady(()=>e(this._innerAPI()))})}_autoResizeChart(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px",l&&setTimeout(()=>{this._iFrame.style.height=window.innerHeight+"px"},30))}_create(){var e,t;let r=null!==(t=null===(e=this._options.enabled_features)||void 0===e?void 0:e.includes("iframe_loading_compatibility_mode"))&&void 0!==t&&t,[s,n]=this._render(!r);this._options.container_id&&console.warn("`container_id` is now deprecated. Please use `container` instead to either still pass a string or an `HTMLElement`.");let i=this._options.container_id||this._options.container,o="string"==typeof i?document.getElementById(i):i;if(null===o)throw Error("There is no such element - #".concat(this._options.container));o.innerHTML=s,this._iFrame=o.querySelector("#".concat(this._id));let l=this._iFrame;r&&(l.contentWindow?(l.contentWindow.document.open(),l.contentWindow.document.write(n),l.contentWindow.document.close()):console.warn("Unable to locate contentWindow for the created iframe. Please try disabling the `iframe_loading_compatibility_mode` featureset.")),(this._options.autosize||this._options.fullscreen)&&(l.style.width="100%",this._options.fullscreen||(l.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(e=>{let t=()=>{l.removeEventListener("load",t,!1),e()};l.addEventListener("load",t,!1)}),this._innerWindowLoaded.then(()=>{this._innerWindow().widgetReady(()=>{for(let e of(this._ready=!0,this._readyHandlers))try{e.call(this)}catch(e){console.error(e)}this._innerWindow().initializationFinished()})})}_render(e){let t=window;if(t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.custom_formatters||this._options.customFormatters,brokerFactory:this._options.broker_factory||this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.broker_config||this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter,additionalSymbolInfoFields:this._options.additional_symbol_info_fields,headerWidgetButtonsMode:this._options.header_widget_buttons_mode,customTranslateFunction:this._options.custom_translate_function,symbolSearchComplete:this._options.symbol_search_complete,contextMenu:this._options.context_menu,settingsOverrides:this._options.settings_overrides,timeframe:this._options.timeframe,customTimezones:this._options.custom_timezones},this._options.saved_data)t[this._id].chartContent={json:this._options.saved_data},this._options.saved_data_meta_info&&(t[this._id].chartContentExtendedData=this._options.saved_data_meta_info);else if(!this._options.load_last_chart&&!this._options.symbol)throw Error("Symbol is not defined: either 'symbol' or 'load_last_chart' option must be set");if(this._options.library_path&&!this._options.library_path.endsWith("/")&&console.warn("library_path option should contain a trailing forward slash"),this._options.locale){let e=encodeURIComponent(this._options.locale);s.findIndex(t=>t.language===e)>=0||(console.warn("locale isn't supported. Using default of `en`."),this._options.locale="en")}let r=function(e,t){var r,n;let i=new URL("".concat(e||""),location.href).href,o=JSON.parse('["bundles/runtime.04214899cac17f000613.js","bundles/__LANG__.137.72f123ce0fa2a1d14aff.js","bundles/6783.6a1bfc6cd105f6a266ca.css","bundles/6783.6a1bfc6cd105f6a266ca.rtl.css","bundles/6151.129f302a262c92b6bcf4.js","bundles/library.6297b1e4665eaf652aeb.js"]'),l=encodeURIComponent(t),a=null!==(n=s.find(e=>e.language===l))&&void 0!==n?n:{iso:"en",dir:"ltr"},d='lang="'.concat(a.iso,'" dir="').concat(a.dir,'"'),c="\n".concat(function(e,t,r){if(void 0===e)return"";let s=[],n=[],i=/\.css$/i,o=/\.rtl\.css$/i;for(let l of e)l.endsWith(".js")?s.push('<script defer crossorigin="anonymous" src="'.concat(l.replace("__LANG__",r),'"></script>')):i.test(l)&&t===o.test(l)&&n.push('<link type="text/css" href="'.concat(l,'" rel="stylesheet"/>'));return[...s,...n].join("\n")}(o,"rtl"===a.dir,l),"\n");return"<!DOCTYPE html><html ".concat((r={bundles:c,localeLanguage:l,htmlAttrs:d,libraryPath:i}).htmlAttrs,'><head><base href="').concat(r.libraryPath,'"><meta charset="utf-8"><script>window===window.parent&&(location.href="about:blank")</script> ').concat(r.bundles,' </head><body class="chart-page unselectable on-widget"><div class="loading-indicator" id="loading-indicator"></div><script>var JSServer={},__initialEnabledFeaturesets=["charting_library"]</script><script>(function() {\n		window.urlParams = (function () {\n			var match,\n				pl	 = /\\+/g,  // Regex for replacing addition symbol with a space\n				search = /([^&=]+)=?([^&]*)/g,\n				decode = function (s) { return decodeURIComponent(s.replace(pl, \' \')).replace(/<\\/?[^>]+(>|$)/g, \'\'); },\n				query = function() {\n					// We don\'t use hash on the url because: safari 13 throws an error if you attempt this\n					// on a blob, and safari 14 will strip hash from blob urls.\n					if (frameElement && frameElement.dataset.widgetOptions) {\n						return frameElement.dataset.widgetOptions;\n					} else {\n						throw "Unexpected use of this page";\n					}\n				}(),\n				result = {};\n\n			while (match = search.exec(query)) {\n				result[decode(match[1])] = decode(match[2]);\n			}\n\n			var additionalSettingsObject = window.parent[result.uid];\n\n			var customObjectNames = [\'datafeed\', \'customFormatters\', \'brokerFactory\', \'save_load_adapter\', \'customTranslateFunction\', \'contextMenu\'];\n\n			for (var p in additionalSettingsObject) {\n				if (customObjectNames.indexOf(p) === -1) {\n					result[p] = JSON.stringify(additionalSettingsObject[p]);\n				}\n			}\n\n			return result;\n		})();\n\n		window.locale = urlParams.locale;\n		window.language = urlParams.locale; // a very big attention needed here\n		window.customTranslateFunction = window.parent[urlParams.uid].customTranslateFunction;\n\n		window.addCustomCSSFile = function(href) {\n			var link = document.createElement(\'link\');\n			link.setAttribute(\'type\', \'text/css\');\n			link.setAttribute(\'rel\', \'stylesheet\');\n			link.setAttribute(\'href\', href);\n			link.setAttribute(\'cross-origin\', \'anonymous\');\n\n			window.loadedCustomCss = new Promise((resolve) => {\n				link.onload = resolve;\n				link.onerror = resolve;\n			});\n			document.body.appendChild(link);\n		};\n\n		window.loadedCustomCss = Promise.resolve();\n		if (!!urlParams.customCSS) {\n			window.addCustomCSSFile(urlParams.customCSS);\n		}\n\n		var loadingScreenParams = {};\n\n		if (typeof urlParams.loading_screen === \'string\') {\n			try {\n				loadingScreenParams = JSON.parse(urlParams.loading_screen);\n			} catch(e) {}\n		}\n\n		var loadingIndicatorElement = document.getElementById(\'loading-indicator\');\n\n		if (loadingScreenParams.backgroundColor) {\n			loadingIndicatorElement.style = \'background-color: \' + loadingScreenParams.backgroundColor;\n		}\n\n		!function(){"use strict";var t,e=new WeakMap;!function(t){t[t.Element=1]="Element",t[t.Document=9]="Document"}(t||(t={}));var n={mini:"xsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"};var i,s,o,r,l,c=(void 0===l&&(l=""),i=\'<div class="tv-spinner \'.concat(l,\'" role="progressbar"></div>\'),o=function(n,i){var s,o;return s=null==i?document.documentElement:i.nodeType===t.Document?i.documentElement:i,e&&(o=e.get(s)),o||((o=s.ownerDocument.createRange()).selectNodeContents(s),e&&e.set(s,o)),o.createContextualFragment(n)}(i,s),null!==(r=o.firstElementChild)&&o.removeChild(r),r),a=function(){function t(t){this._shown=!1,this._el=c.cloneNode(!0),this.setSize(n[t||"large"])}return t.prototype.spin=function(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this},t.prototype.stop=function(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},t.prototype.setStyle=function(t){var e=this;return Object.keys(t).forEach((function(n){var i=t[n];void 0!==i&&e._el.style.setProperty(n,i)})),this},t.prototype.style=function(){return this._el.style},t.prototype.setSize=function(t){var e=void 0!==t?"tv-spinner--size_".concat(t):"";return this._el.className="tv-spinner ".concat(e," ").concat(this._shown?"tv-spinner--shown":""),this},t.prototype.getEl=function(){return this._el},t.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},t}();window.Spinner=a}();\n\n\n		var spinnerColor = (loadingScreenParams.foregroundColor) ? loadingScreenParams.foregroundColor : undefined;\n\n		var loadingSpinner = new Spinner(\'large\').setStyle({\n			\'--tv-spinner-color\': spinnerColor,\n			zIndex: String(2e9),\n		});\n		loadingSpinner.getEl().classList.add(\'spinner\');\n		loadingSpinner.spin(loadingIndicatorElement);\n	})();</script></body></html>')}(this._options.library_path||"",this._options.locale),n=new URL("about:blank");if(e){let e=new Blob([r],{type:"text/html"}),t=URL.createObjectURL(e);n=new URL(t)}let i="symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.custom_font_family?"&customFontFamily="+encodeURIComponent(this._options.custom_font_family):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.compare_symbols?"&compareSymbols="+encodeURIComponent(JSON.stringify(this._options.compare_symbols)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"")+(this._options.header_widget_buttons_mode?"&header_widget_buttons_mode="+encodeURIComponent(String(this._options.header_widget_buttons_mode)):"")+(this._options.time_scale?"&time_scale="+encodeURIComponent(JSON.stringify(this._options.time_scale)):"");return['<iframe\n		id="'.concat(this._id,'" name="').concat(this._id,'" src="').concat(n.href,'" data-widget-options="').concat(i,'"\n		').concat(this._options.autosize||this._options.fullscreen?"":'width="'.concat(this._options.width,'" height="').concat(this._options.height,'"'),' title="Financial Chart" frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;">\n	</iframe>'),r]}constructor(e){var s;if(this._id="tradingview_".concat((1048576*(1+Math.random())|0).toString(16).substring(1)),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw Error("Datafeed is not defined");(null===(s=e.overrides)||void 0===s?void 0:s["mainSeriesProperties.priceAxisProperties.lockScale"])&&(console.warn("mainSeriesProperties.priceAxisProperties.lockScale can not be set to true within the widget constructor"),delete e.overrides["mainSeriesProperties.priceAxisProperties.lockScale"]),this._options=t(r,e),"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._options.debug&&(n||(n=!0,console.log("Using CL v25.000 (internal id 1394882f @ 2023-05-22T15:05:42.670Z)"))),this._create()}};window.TradingView=window.TradingView||{},window.TradingView.version=i;let l=!(!window.navigator||!window.navigator.userAgent)&&window.navigator.userAgent.includes("CriOS");return e.version=i,e.widget=o,e}({}),p=r(90082),f=r(76235),g=r(31716),y=r(91825),b=r(76769),v=r(54520),_=r(76230);let j="#FF5D5D",w="#04D56F",N={1:"1m",60:"1h","1D":"1d"},C={"paneProperties.background":"#010214","paneProperties.backgroundGradientStartColor":"#16182e","paneProperties.backgroundGradientEndColor":"#16182e","paneProperties.backgroundType":"solid","paneProperties.vertGridProperties.color":"#010214","paneProperties.vertGridProperties.style":1,"paneProperties.horzGridProperties.color":"rgba(35, 38, 59, 1)","paneProperties.horzGridProperties.style":1,"mainSeriesProperties.priceLineColor":"#FCF695","mainSeriesProperties.priceLineWidth":2,"mainSeriesProperties.minTick":"100,1,false","mainSeriesProperties.style":3,"mainSeriesProperties.areaStyle.linewidth":1,"mainSeriesProperties.areaStyle.linecolor":"#fcf695","mainSeriesProperties.areaStyle.color1":"rgba(252, 246, 149, 0.7)","mainSeriesProperties.areaStyle.color2":"rgba(0, 0, 0, 0)","scalesProperties.textColor":"#fff","scalesProperties.lineColor":"#16182e",...["candleStyle","hollowCandleStyle","haStyle"].reduce((e,t)=>(e["mainSeriesProperties.".concat(t,".drawWick")]=!0,e["mainSeriesProperties.".concat(t,".drawBorder")]=!1,e["mainSeriesProperties.".concat(t,".upColor")]=w,e["mainSeriesProperties.".concat(t,".downColor")]=j,e["mainSeriesProperties.".concat(t,".wickUpColor")]=w,e["mainSeriesProperties.".concat(t,".wickDownColor")]=j,e["mainSeriesProperties.".concat(t,".borderUpColor")]=w,e["mainSeriesProperties.".concat(t,".borderDownColor")]=j,e),{})},P=["legend_widget","context_menus","edit_buttons_in_legend","header_widget","use_localstorage_for_settings","volume_force_overlay","show_logo_on_all_charts","caption_buttons_text_if_possible","create_volume_indicator_by_default","header_compare","compare_symbol","display_market_status","header_interval_dialog_button","show_interval_dialog_on_key_press","header_symbol_search","popup_hints","header_in_fullscreen_mode","use_localstorage_for_settings","right_bar_stays_on_scroll","symbol_info","timeframes_toolbar"],k=["hide_left_toolbar_by_default","iframe_loading_compatibility_mode"];var S=e=>{let{address:t}=(0,b.M)()||{},{isOnline:r}=(0,p.k)(),{data:i}=l(),o=(0,n.useRef)(null),[a,d]=(0,n.useState)(!1),c=(0,n.useRef)(null),u=(0,n.useRef)(null),S=(0,n.useRef)(new Map),{product:I}=(0,_.i)(),{data:U,isLoading:L}=(0,v.qZ)(),{data:A}=(0,v.ay)(U||0,I.id),{data:O,mutate:T}=(0,v.L2)("filled",U||0,I.id,null!=t?t:"",50,1),F=null==O?void 0:O.data,E=(0,n.useCallback)(e=>{let r=[9900,9950,1e4,10050,10100],s=r;if(r.forEach(t=>{let r=S.current.get(t);r&&(e.removeEntity(r),S.current.set(t,void 0))}),S.current=new Map,(null==F?void 0:F.length)>0){let n=new Map;F.forEach(e=>{let r=e.strike,s=0;e.overUser==t&&(s+=e.unit),e.underUser==t&&(s-=e.unit),n.has(r)?n.set(r,n.get(r)+s):n.set(r,s)}),n.forEach((t,r)=>{let s=A?A.startPrice*r/1e12:0,n=0==t?"#ffffff":t>0?w:j,i=e.createShape({price:s},{shape:"horizontal_line",disableSelection:!0,overrides:{linecolor:n,linestyle:0}});S.current.set(r,i)}),s=r.filter(e=>!n.has(e))}s.forEach(t=>{let r=A?A.startPrice*t/1e12:0,s=e.createShape({price:r},{shape:"horizontal_line",disableSelection:!0,overrides:{linecolor:"#777",linestyle:3,linewidth:1}});S.current.set(t,s)})},[F,A]),M=(e,t)=>{u.current&&e.removeEntity(u.current),u.current=e.createMultipointShape([{time:t,price:0}],{shape:"vertical_line",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,overrides:{linestyle:1,linewidth:1,linecolor:"#FCF695"}})};return(0,n.useEffect)(()=>{let e=(0,g.Ld)("showStrike",(e,t,r)=>{if(!o.current)return;let s=o.current.activeChart(),n=S.current.get(e);n&&(s.removeEntity(n),S.current.set(e,void 0)),c.current=s.createShape({price:r},{shape:"horizontal_line",overrides:{linecolor:t==y.Ly.Over?w:j,linestyle:0}})}),t=(0,g.Ld)("hideStrike",e=>{if(!o.current)return;let t=o.current.activeChart();t.removeEntity(c.current),E(t)}),r=(0,g.Ld)("refetch",()=>{T()});return()=>{(0,g.r1)(e),(0,g.r1)(t),(0,g.r1)(r)}},[A,E]),(0,n.useEffect)(()=>{if(!A||!o.current||0==A.startPrice)return;let e=A.startPrice/1e8*.9851,t=A.startPrice/1e8*1.0185;try{let r=o.current.activeChart().getPanes()[0].getRightPriceScales()[0];if(!r)return;r.setVisiblePriceRange({from:e,to:t})}catch(e){}},[A,a]),(0,n.useEffect)(()=>{if(!a||!A)return;let e=o.current.activeChart();return M(e,A.endTimestamp),E(e),()=>{a&&A&&(e.removeAllShapes(),S.current=new Map)}},[A,a,F,E]),(0,n.useEffect)(()=>{var t,r;let s=document.createElement("script");s.type="text/jsx",s.src="/charting_library/charting_library.js",document.head.appendChild(s);let n=new Date().getTime()/1e3,l=(r=(t=new Date).getHours()+1,t.setHours(r),t.setMinutes(20),t.setSeconds(0),t.setMilliseconds(0),t.getTime()/1e3),a=new m.widget({symbol:e.symbol,interval:"1",timeframe:{from:n-16200,to:l},container:"tv_chart_container",datafeed:h,locale:"en",theme:"dark",width:"100%",height:"100%",custom_css_url:"/trading_view/style.css",library_path:"/charting_library/",enabled_features:k,disabled_features:P,overrides:C,loading_screen:{backgroundColor:"#000000",foregroundColor:"#FCF695"},favorites:{intervals:Object.keys(N)},custom_formatters:{timeFormatter:{format:e=>(0,f.WU)(e,"HH:mm")},dateFormatter:{format:e=>""}},debug:!1});if(o.current=a,a.onChartReady(()=>{d(!0)}),i)for(let[e,t]of Object.entries(i))t.price>0&&a.onChartReady(()=>{a.chart().createOrderLine().setText(t.label).setLineLength(3).setLineStyle(0).setQuantity(0).setPrice(t.price).setLineColor(t.color).setBodyTextColor("white").setBodyBorderColor(t.color).setBodyBackgroundColor(t.color)});return()=>{s.remove(),d(!1),o.current=null}},[r,i,e.symbol]),(0,s.jsxs)("div",{className:"tradingview-widget-container",style:{height:"100%",width:"100%"},children:[(0,s.jsx)("div",{id:"tv_chart_container",style:{height:"454px",width:"100%"}}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("a",{rel:"noopener noreferrer",target:"_blank",className:"items-center space-x-2 justify-end px-4 py-2 fill-current text-xxs pl-4",href:"https://pyth.network/",children:(0,s.jsx)(x.default,{src:"/pyth-logotype-light.svg",width:60,height:20,alt:"pyth"})})})]})},I=r(43425);let U="#FF5D5D",L="#04D56F",A="#848484",O="390px",T={1:"1m",60:"1h","1D":"1d"},F={"paneProperties.background":"#010214","paneProperties.backgroundGradientStartColor":"#16182e","paneProperties.backgroundGradientEndColor":"#16182e","paneProperties.backgroundType":"solid","paneProperties.vertGridProperties.color":"#010214","paneProperties.vertGridProperties.style":1,"paneProperties.horzGridProperties.color":"rgba(35, 38, 59, 1)","paneProperties.horzGridProperties.style":1,"mainSeriesProperties.priceLineColor":"#FCF695","mainSeriesProperties.priceLineWidth":2,"mainSeriesProperties.minTick":"100,1,false","mainSeriesProperties.priceAxisProperties.minTick":"0.01","mainSeriesProperties.style":3,"mainSeriesProperties.areaStyle.linewidth":1,"mainSeriesProperties.areaStyle.linecolor":"#fcf695","mainSeriesProperties.areaStyle.color1":"rgba(252, 246, 149, 0.7)","mainSeriesProperties.areaStyle.color2":"rgba(0, 0, 0, 0)","scalesProperties.textColor":"#fff","scalesProperties.lineColor":"#16182e",...["candleStyle","hollowCandleStyle","haStyle"].reduce((e,t)=>(e["mainSeriesProperties.".concat(t,".drawWick")]=!0,e["mainSeriesProperties.".concat(t,".drawBorder")]=!1,e["mainSeriesProperties.".concat(t,".upColor")]=L,e["mainSeriesProperties.".concat(t,".downColor")]=U,e["mainSeriesProperties.".concat(t,".wickUpColor")]=L,e["mainSeriesProperties.".concat(t,".wickDownColor")]=U,e["mainSeriesProperties.".concat(t,".borderUpColor")]=L,e["mainSeriesProperties.".concat(t,".borderDownColor")]=U,e),{})},E=["legend_widget","context_menus","edit_buttons_in_legend","header_widget","use_localstorage_for_settings","volume_force_overlay","show_logo_on_all_charts","caption_buttons_text_if_possible","create_volume_indicator_by_default","header_compare","compare_symbol","display_market_status","header_interval_dialog_button","show_interval_dialog_on_key_press","header_symbol_search","popup_hints","header_in_fullscreen_mode","use_localstorage_for_settings","right_bar_stays_on_scroll","symbol_info","timeframes_toolbar"],M=["hide_left_toolbar_by_default","iframe_loading_compatibility_mode"];var R=e=>{let{address:t}=(0,b.M)()||{},{isOnline:r}=(0,p.k)(),{data:i}=l(),o=(0,n.useRef)(null),[a,d]=(0,n.useState)(!1),c=(0,n.useRef)(null),u=(0,n.useRef)(null),x=(0,n.useRef)(new Map),j=(0,n.useRef)(y.Ly.Over),{product:w}=(0,_.i)(),[N,C]=(0,n.useState)(O),{data:P,isLoading:k}=(0,v.qZ)(),{data:S}=(0,v.ay)(P||0,w.id),{data:R,mutate:D}=(0,v.L2)("filled",P||0,w.id,null!=t?t:"",50,1),{data:W,error:B,isLoading:z,mutate:H}=(0,v.qi)((null==S?void 0:S.epoch)||0,w.id,[10100,10050,1e4,9950,9900],1),Z=null==R?void 0:R.data,Y=(0,n.useCallback)(e=>{let t=[9900,9950,1e4,10050,10100];e.removeAllShapes();let r=null==W?void 0:W.slice().map(e=>{let t=j.current.split("-")[0]==y.Ly.Under?e.underPrice:e.overPrice;return{strike:e.strike,orderPrice:t}}).filter(e=>e.orderPrice>0).sort((e,t)=>e.orderPrice-t.orderPrice),s=0,n=0,i=0;if(r){var o,l,a;1==j.current.split("-").length?(n=null===(o=r[0])||void 0===o?void 0:o.strike,s=+(null==S?void 0:S.startPrice)*n/1e8/1e4,i=null===(l=r[0])||void 0===l?void 0:l.orderPrice):(n=t.find(e=>e==j.current.split("-")[1]),s=+(null==S?void 0:S.startPrice)*n/1e8/1e4,i=(null==r?void 0:null===(a=r.find(e=>e.strike==n))||void 0===a?void 0:a.orderPrice)|0)}e.createShape({price:s},{shape:"horizontal_line",overrides:{linecolor:j.current.split("-")[0]==y.Ly.Under?U:L,linestyle:0}}),t.filter(e=>e!==n).forEach(t=>{let r=S?S.startPrice*t/1e12:0,s=e.createShape({price:r},{shape:"horizontal_line",disableSelection:!0,overrides:{linecolor:"#777",linestyle:3,linewidth:1}});x.current.set(t,s)});let d=(0,I.vW)(null==S?void 0:S.endTimestamp,"HH:mm");J(e,s,"00:00"==d?"24:00":d,i)},[Z,S,W]),$=(e,t)=>{c.current&&e.removeEntity(c.current),c.current=e.createMultipointShape([{time:t,price:0}],{shape:"vertical_line",lock:!0,disableSelection:!0,disableSave:!0,disableUndo:!0,overrides:{linestyle:1,linewidth:1,linecolor:"#FCF695"}})};(0,n.useEffect)(()=>{let e=(0,g.Ld)("showPayout",(e,t)=>{if(!o.current)return;let r=o.current.activeChart();r.removeAllShapes(),j.current=t+"-"+e,Y(r)}),t=(0,g.Ld)("refetch",()=>{D()}),r=(0,g.Ld)("position",e=>{if(o.current)try{let t=o.current.activeChart();t.removeAllShapes(),j.current=e,Y(t)}catch(e){}});return()=>{(0,g.r1)(e),(0,g.r1)(t),(0,g.r1)(r)}},[S,Y]),(0,n.useEffect)(()=>{if(!S||!o.current||0==S.startPrice)return;let e=S.startPrice/1e8*.9851,t=S.startPrice/1e8*1.0185;try{let r=o.current.activeChart().getPanes()[0].getRightPriceScales()[0];if(!r)return;r.setVisiblePriceRange({from:e,to:t})}catch(e){}},[S,a]),(0,n.useEffect)(()=>{if(!a||!S)return;let e=o.current.activeChart();return $(e,S.endTimestamp),Y(e),()=>{a&&S&&(e.removeAllShapes(),x.current=new Map)}},[S,a,Z,Y]),(0,n.useEffect)(()=>{var t,r;let s=document.createElement("script");s.type="text/jsx",s.src="/charting_library/charting_library.js",document.head.appendChild(s);let n=new Date().getTime()/1e3,i=(r=(t=new Date).getHours()+1,t.setHours(r),t.setMinutes(20),t.setSeconds(0),t.setMilliseconds(0),t.getTime()/1e3),l=new m.widget({symbol:e.symbol,interval:"1",timeframe:{from:n-16200,to:i},container:"tv_chart_container",datafeed:h,locale:"en",theme:"dark",width:"100%",height:"100%",custom_css_url:"/trading_view/style.css",library_path:"/charting_library/",enabled_features:M,disabled_features:E,overrides:F,loading_screen:{backgroundColor:"#000000",foregroundColor:"#FCF695"},favorites:{intervals:Object.keys(T)},custom_formatters:{timeFormatter:{format:e=>(0,f.WU)(e,"HH:mm")},dateFormatter:{format:e=>""}},debug:!1});return o.current=l,l.onChartReady(()=>{d(!0);let e=document.getElementById("tv_chart_container");if(e){if(!o.current)return;let t=o.current.activeChart();new ResizeObserver(()=>{Y(t)}).observe(e)}else console.error("Chart container element not found")}),()=>{s.remove(),d(!1),o.current=null}},[r,i,e.symbol]);let q=(e,t)=>{if(!document.getElementById("custom_canvas"))throw Error("Canvas element not found.");e.fillStyle="black",X(e,t.x,t.y,t.width,t.height,t.radius),e.fill(),e.strokeStyle="Under"==t.position?"rgba(255, 93, 93, 1)":"rgba(4, 213, 111, 1)",X(e,t.x,t.y,t.width,t.height,t.radius),e.lineWidth=2,e.stroke();let r="14px Arial",s="white",n=t.x+10,i=t.height/2+t.y-5,o=G(e,"Pay ",n,i,r,s);o+=G(e,t.orderPrice,n+o,i,r,"N/A"==t.orderPrice?A:"Under"==t.position?U:L),o+=G(e," to win ",n+o,i,r,s),o+=G(e," $100",n+o,i,r,"#6AFFB7"),G(e," (".concat(t.payout,")"),n+o,i,r,A);let l=t.x+10,a=t.y+t.height/2+20-5;o=G(e,"If End Price ",l,a,r,s),o+=G(e," (at ".concat(t.endTime,") "),l+o,a,r,A),o+=G(e," ".concat("Under"==t.position?"<":">"," "),l+o,a,r,"Under"==t.position?U:L),G(e,"".concat(t.strikePrice),l+o,a,r,s)},G=(e,t,r,s,n,i)=>(e.fillStyle=i,e.font=n,e.fillText(t,r,s),e.measureText(t).width),X=(e,t,r,s,n,i)=>{e.beginPath(),e.moveTo(t+i,r),e.lineTo(t+s-i,r),e.quadraticCurveTo(t+s,r,t+s,r+i),e.lineTo(t+s,r+n-i),e.quadraticCurveTo(t+s,r+n,t+s-i,r+n),e.lineTo(t+i,r+n),e.quadraticCurveTo(t,r+n,t,r+n-i),e.lineTo(t,r+i),e.quadraticCurveTo(t,r,t+i,r),e.closePath()},J=(e,t,r,s)=>{if(t)try{let n=e.getPanes()[0].getRightPriceScales()[0],i=n._priceScale.priceToCoordinate(t),o=n._priceScale.m_priceRange._maxValue.toFixed(2),l=document.getElementById("tv_chart_container"),a=document.getElementById("custom_canvas"),d=window.devicePixelRatio;if(a.width=l.offsetWidth*d,a.height=l.offsetHeight*d,!a)throw Error("Canvas element not found.");let c=a.getContext("2d");c.scale(d,d),c.clearRect(0,0,a.width,a.height);let h=j.current.split("-")[0],x=18+7*o.length;if("Under"==h){let e=c.createLinearGradient(0,i,0,l.offsetHeight);e.addColorStop(0,"rgba(167, 5, 5, 0.5)"),e.addColorStop(1,"rgba(167, 5, 5, 0)"),c.fillStyle=e,c.fillRect(0,i,l.offsetWidth-x,l.offsetHeight-i-30)}else{let e=c.createLinearGradient(0,0,0,i);e.addColorStop(0,"rgba(10, 88, 50, 0)"),e.addColorStop(1,"rgba(10, 88, 50, 0.5)"),c.fillStyle=e,c.fillRect(0,0,l.offsetWidth-x,i+2)}let m="N/A";"number"==typeof s&&s>0&&(m=(0,I.Y4)(100/s,1==s?0:s>=10?2:1)+"x"),u.current={orderPrice:"".concat(s>0?"$"+s:"N/A"),strikePrice:"$".concat((0,I.Y4)(t)),payout:m,endTime:r,x:(l.offsetWidth-x-253)/2,y:"Under"==h?i+5:i-50-5,width:253,height:50,radius:8,position:h},q(c,u.current)}catch(e){console.error(e)}};return(0,n.useEffect)(()=>{let e=()=>{C(window.innerWidth<=768?O:"487px")};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.jsxs)("div",{className:"tradingview-widget-container",style:{height:"100%",width:"100%"},children:[(0,s.jsx)("div",{id:"tv_chart_container",style:{height:N,width:"100%"}}),(0,s.jsx)("canvas",{id:"custom_canvas"})]})},D=r(32246);function W(e){let{className:t,chartType:r}=e,[l,a]=(0,n.useState)(1),{product:d}=(0,_.i)(),[c,u]=(0,n.useState)(d.symbol+"USD"),h=i();return(0,n.useEffect)(()=>{let e=setTimeout(()=>{},0),t=(0,g.Ld)("ProductSelected",t=>{u(t.ticker.toString().substring(7).replace("/","")),a(0),e=setTimeout(()=>{a(1)},1200)});return()=>{(0,g.r1)(t),clearTimeout(e)}},[]),(0,s.jsxs)("div",{className:"relative items-center justify-center flex-1 min-h-96 min-w-80 "+t,style:{opacity:l,transition:0==l?"":"opacity 1s ease"},children:[(0,s.jsx)(o.Provider,{value:h,children:r?(0,s.jsx)(R,{symbol:c}):(0,s.jsx)(S,{symbol:c})}),(0,s.jsx)(D.Z,{pattern:"3-b-99999",reverse:!0,children:(0,s.jsx)("div",{className:"absolute pointer-events-none bg-black w-full h-full translate-x-[-100%] translate-y-[-50%]"})})]})}},70892:function(e,t,r){r.d(t,{Z:function(){return y}});var s=r(57437),n=r(54520),i=r(76769),o=r(4815),l=r(66648),a=r(2265),d=r(91825),c=r(31716),u=r(43425),h=r(24302),x=r(91781),m=r(21216),p=r(8581),f=r(48545),g=r(9788);function y(e){let{filledOrder:t,onClose:r}=e,y=(0,i.M)(),b=null==y?void 0:y.address,[v,_]=(0,a.useState)(""),j=b==t.overUser?d.Ly.Over:d.Ly.Under,w=b==t.overUser?d.Ly.Under:d.Ly.Over,N=t.unit,C=b==t.overUser?t.overPrice:t.underPrice,[P,k]=(0,a.useState)(!1),[S,I]=(0,a.useState)(!1),[U,L]=(0,a.useState)(!1),[A,O]=(0,a.useState)({}),{data:T,mutate:F}=(0,n.FW)(null!=b?b:""),E=(0,n.sb)(T),{connect:M}=(0,o.W)(),R=async(e,s,i,o)=>{if(!b){await M({client:h.Lp,appMetadata:h.EY,chains:h.p5,wallets:h.fh});return}await (0,n.Xx)(y),k(!0);try{if(!b){console.log("no address");return}let l=await (0,n.R5)(e,b,s==d.Ly.Over?"over":"under",o,i);(e=>{if(e.result){let t=JSON.parse(e.result);t.type=e.type,O(t),I(!0)}else O({type:"market"}),I(!0)})(l),console.info("placeMarketOrder call successs",l),f.n.track("Order Placed",{"User Address":b,"Round Epoch":t.epoch,"Product Id":t.productId,"Order Strike":t.strike,"Order Position":s,"Order Type":d.mr.Market,"Order Unit":o,"Order Price":i,"Original Order Id":t.id,Component:"ClosePositionPopup"}),_(""),(0,c.j8)("refetch"),setTimeout(()=>{I(!1),r()},1500)}catch(e){console.error("contract call failure",e),(0,u.Sm)(e)}k(!1)},D="number"==typeof N&&N>0,W="number"==typeof v&&v>0,B=()=>"N/A"==v,z=!P&&(!E||E<1||D&&W&&E<Math.ceil(v)*N);(0,a.useEffect)(()=>{let e=async()=>{try{let e=await (0,n.G7)(t.epoch,t.productId,t.strike,w==d.Ly.Over?"under":"over",t.unit);console.log(JSON.stringify(e));let r=e.unit,s=e.price;N==r?_(Math.ceil(s/r)):(N>r||0==r)&&_("N/A")}catch(e){console.error(e),_("")}};e();let r=setInterval(e,1e3);return()=>{clearInterval(r)}},[t,w,N]),console.log(v);let[H,Z]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"flex flex-col w-[90%] md:w-[408px] bg-navy-30  gap-4 rounded-2xl py-5 min-h-[349px] mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between px-5 text-[22px]",children:[(0,s.jsx)("span",{children:"Close Position"}),(0,s.jsx)(l.default,{className:"cursor-pointer",src:"/orderpopup_close.svg",width:24,height:24,alt:"Close",onClick:r})]}),(0,s.jsx)("div",{className:"mt-2 px-5 text-sm cursor-pointer",onClick:()=>{Z(!H)},children:(0,s.jsxs)("ul",{className:"rounded-2xl px-4 py-4 bg-navy-20",children:[(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Order ID"}),(0,s.jsxs)("span",{children:["#",t.id," ",(0,s.jsx)(l.default,{className:"inline-block"+(H?" transform -scale-y-100":""),src:"/orderinterface_arrow_down.svg",width:16,height:16,alt:"menu"})]})]})}),H&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Asset"}),(0,s.jsx)("p",{children:g.b[t.productId].symbol})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Strike"}),(0,s.jsxs)("p",{children:[t.strike/100,"%"]})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Position"}),(0,s.jsx)("p",{className:j==d.Ly.Under?"text-red-100":"text-green-100",children:j})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Price"}),(0,s.jsx)("p",{children:"$"+(0,u.Y4)(C,0)})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Unit"}),(0,s.jsx)("p",{children:(0,u.Y4)(N,0)})]})})]})]})}),(0,s.jsx)("div",{className:"px-5",children:"To close the position, place the following order."}),(0,s.jsx)("div",{className:"px-5 text-sm",children:(0,s.jsxs)("ul",{className:"rounded-2xl px-4 py-4 bg-navy-20",children:[(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Asset"}),(0,s.jsx)("p",{children:g.b[t.productId].symbol})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Strike"}),(0,s.jsxs)("p",{children:[t.strike/100,"%"]})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Position"}),(0,s.jsx)("p",{className:w==d.Ly.Under?"text-red-100":"text-green-100",children:w})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Price"}),(0,s.jsx)("p",{children:"number"==typeof v?v>0?"$"+(0,u.Y4)(v,0):"N/A":"..."})]})}),(0,s.jsx)("li",{className:"mb-1",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"Unit"}),(0,s.jsx)("p",{children:(0,u.Y4)(N,0)})]})}),(0,s.jsx)("li",{className:"mb-1 text-yellow-500",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)("p",{children:"PnL"}),(0,s.jsx)("p",{children:"number"==typeof v?v>0?(0,u.ll)(100-C-v,0):"N/A":"..."})]})})]})}),(0,s.jsxs)("div",{className:"flex flex-row gap-4 px-5",children:[z&&(0,s.jsx)("button",{className:"font-semibold rounded-full w-full h-14 px-5 py-2 mt-6 disabled:bg-yellow-40 bg-yellow-100  hover:bg-yellow-50 text-black",onClick:async()=>{f.n.track("Button Clicked",{"Button Name":b?"Deposit":"Connect",Component:"LiteOrderPopup"}),b?L(!0):await M({client:h.Lp,appMetadata:h.EY,chains:h.p5,wallets:h.fh})},children:b?"Deposit":"Connect"}),(0,s.jsx)("button",{disabled:B()||"number"==typeof N&&"number"==typeof v&&"number"==typeof E&&N*v>E||z||P||!(D&&W),onClick:async()=>{!B()&&"string"!=typeof v&&(P||(f.n.track("Button Clicked",{"Button Name":"Close Position",Component:"ClosePositionPopup"}),await R(t.id,w,v,N)))},className:"font-semibold rounded-full w-full text-gray-0 h-14 px-5 py-2 mt-6 disabled:bg-yellow-40 "+(B()?"bg-yellow-100  text-black border hover:text-gray-0 hover:bg-yellow-50":"bg-yellow-100  hover:bg-yellow-50 text-black"),children:B()?"N/A":P?"Loading...":"Close Position"})]}),(0,s.jsx)(m.Z,{show:S,"aria-labelledby":"modal-1-label",onHide:()=>I(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[400]"}),className:"fixed z-[401] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full md:w-auto ",children:(0,s.jsx)(x.Z,{onClose:()=>I(!1),data:A})}),(0,s.jsx)(m.Z,{show:U,"aria-labelledby":"modal-deposit-label",onHide:()=>L(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[300]"}),className:"fixed z-[301] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full md:w-auto",children:(0,s.jsx)(p.Z,{onClose:()=>L(!1)})})]})}},80614:function(e,t,r){r.d(t,{Z:function(){return f}});var s=r(57437),n=r(66648),i=r(43425),o=r(81673),l=r(2265);function a(e){let{product:t}=e,[r,n]=(0,l.useState)(0),[a,d]=(0,l.useState)("text-green-100");return(0,l.useEffect)(()=>{let e=(0,o.fC)(t.ticker,e=>{n(t=>(t>e.p?d("text-red-100"):d("text-green-100"),e.p))});return()=>{(0,o.r7)(t.ticker,e),n(0)}},[t]),(0,s.jsx)("div",{className:a,children:(0,i.Y4)(r,t.precision)})}var d=r(9788),c=r(31716),u=r(2425);function h(e){let{round:t,product:r}=e,[n,a]=(0,l.useState)(0),[d,c]=(0,l.useState)("text-green-100");if((0,l.useEffect)(()=>{let e=(0,o.fC)(r.ticker,e=>{a(r=>(t&&(1e10*e.p/parseInt(t.startPrice)<100?c("text-red-100"):c("text-green-100")),e.p))});return()=>{(0,o.r7)(r.ticker,e),a(0)}},[t,r]),!t||0==parseInt(t.startPrice))return null;let u=1e10*n/parseInt(t.startPrice);return(0,s.jsx)("div",{className:d+" px-2 text-[15px]",children:(0,i.Y4)(u,2,"%")})}var x=r(76230),m=r(54520);let p=e=>{let{product:t,onClick:r}=e;return(0,s.jsxs)("div",{className:"flex flex-row w-64 bg-black hover:bg-gray-40 rounded-2xl cursor-pointer p-3",onClick:()=>{r(t)},children:[(0,s.jsx)(n.default,{src:t.icon,width:24,height:24,alt:"ticker"}),(0,s.jsx)("span",{className:"flex-1 px-2",children:t.ticker.substring(7)}),(0,s.jsx)(a,{product:t})]})};function f(){let{product:e,setProduct:t}=(0,x.i)(),{data:r}=(0,m.qZ)(),{data:i}=(0,m.ay)(r||0,e.id),[o,f]=(0,l.useState)(!1),g=(0,l.useRef)(null);(0,u.O)(g,()=>{o&&f(!1)}),(0,l.useEffect)(()=>((0,c.j8)("ProductSelected",e),()=>{}),[e]);let y=e=>{t(e),f(!1)};return(0,s.jsxs)("div",{className:"relative",ref:g,children:[(0,s.jsxs)("div",{className:"flex flex-row  md:h-14 text-[19px] md:text-[22px] font-semibold",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center px-3 md:py-2  hover:bg-gray-30 rounded-2xl mr-2 lg:mr-4 cursor-pointer",onClick:()=>{f(!o)},children:[(0,s.jsx)(n.default,{src:e.icon,width:24,height:24,alt:"Coin"}),(0,s.jsx)("span",{className:"px-2",children:e.ticker.substring(7)}),(0,s.jsx)(n.default,{className:o?" transform -scale-y-100":"",src:"/orderinterface_arrow_down.svg",width:16,height:16,alt:"menu"})]}),(0,s.jsxs)("div",{className:"flex flex-row w-[180px] text-[20px] items-center md:items-baseline px-2 md:px-0 md:pt-3",children:[(0,s.jsx)(a,{product:e}),(0,s.jsx)(h,{round:i,product:e})]})]}),(0,s.jsx)("div",{className:"absolute mt-2 z-20 cursor-pointer border rounded-2xl border-gray-40 bg-black p-2 "+(o?"":"hidden"),children:(0,s.jsx)("div",{children:d.b.map(e=>(0,s.jsx)(p,{product:e,onClick:y},e.id))})})]})}},9865:function(e,t,r){r.d(t,{Z:function(){return f}});var s=r(57437),n=r(54520),i=r(77102),o=r(24302),l=r(43425),a=r(21216),d=r(2265),c=r(76769),u=r(64940),h=r(4815),x=r(8581),m=r(31716),p=r(48545);function f(){let e=(0,c.M)(),t=null==e?void 0:e.address,r=(0,o.DU)(),f=(0,u.l)(),{connect:g}=(0,h.W)(),{data:y,mutate:b}=(0,n.FW)(null!=t?t:""),v=(0,n.sb)(y),[_,j]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let e=(0,m.Ld)("update_balance",()=>{b()});return()=>{(0,m.r1)(e)}},[t,b]),(0,s.jsxs)("div",{className:"flex flex-row flex-wrap items-center text-xs gap-2",children:[(0,s.jsxs)("p",{className:"text-gray-50",children:["Balance:"," ",(0,s.jsxs)("span",{className:"text-gray-99",children:["$",(0,l.Y4)(v,2,"",0)," "]})]}),(0,s.jsx)("button",{className:"rounded-full w-13 text-gray-99 px-3 py-1 border-navy-60 bg-navy-60 border hover:border-gray-50",onClick:async()=>{if(p.n.track("Button Clicked",{"Button Name":"Deposit",Component:"LiteOrderInterface"}),!t){await g({client:o.Lp,appMetadata:o.EY,chains:o.p5,wallets:o.fh});return}if(r){f((0,i.sX)()).then(()=>{j(!0)}).catch(e=>{});return}await (0,n.Xx)(e),j(!0)},children:"Deposit"}),(0,s.jsx)(a.Z,{show:_,"aria-labelledby":"modal-deposit-label",onHide:()=>j(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[300]"}),className:"fixed z-[301] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full ",children:(0,s.jsx)(x.Z,{onClose:()=>j(!1)})})]})}},183:function(e,t,r){r.d(t,{Z:function(){return O}});var s=r(57437),n=r(43425),i=r(2265),o=r(43419),l=r(21216),a=r(66648),d=r(41450),c=r(54520),u=r(76235),h=r(81613),x=r(9788),m=r(31716),p=r(54038),f=r(22594),g=r(77102),y=r(95956),b=r(76769),v=r(97293);function _(e){let{src:t,srcOn:r,alt:n,onClick:o,href:l}=e,[d,c]=(0,i.useState)(!1),u=(0,s.jsx)(a.default,{className:"cursor-pointer",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onClick:o,src:d?r:t,width:48,height:48,alt:n});return l?(0,s.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:u}):u}function j(e){let{order:t}=e;return(0,s.jsxs)("div",{className:"mt-5 flex flex-row gap-4 text-[#848484]",children:[(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{children:"Coin"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-1 text-sm font-semibold text-white md:text-base",children:[(0,s.jsx)(a.default,{src:x.b[t.productId].icon,width:24,height:24,alt:"ticker"}),x.b[t.productId].ticker.substring(7)]})]}),(0,s.jsxs)("div",{className:"text-xs",children:[(0,s.jsx)("div",{children:"Round"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-center text-sm font-semibold text-yellow-100 md:text-base",children:["#",t.epoch]})]}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col items-center gap-1 text-xs",children:[(0,s.jsx)("div",{children:"Position"}),(0,s.jsxs)("div",{className:"flex items-center justify-center overflow-hidden rounded-xl border-[2px] px-2 py-1 text-sm font-medium text-primary md:text-base ".concat("Over"==t.position?"border-green-100 text-green-100":"border-red-100 text-red-100"),children:[t.strike/100,"% ",t.position]})]})]})}function w(e){let{pnl:t,pnlPercentage:r,code:i}=e,o=r>0?"+".concat(r.toFixed(2),"%"):"-100%";return(0,s.jsxs)("div",{className:"mt-5 flex flex-col overflow-hidden bg-profit-share-gradient rounded-2xl border-1 border-white border-opacity-10 px-4 py-4",children:[(0,s.jsx)("h1",{className:"text-[32px] font-extrabold md:text-[48px] ".concat(r<=0?"text-red-100":"text-green-100"),children:o}),(0,s.jsxs)("h1",{className:"text-[24px] font-extrabold md:text-[28px] ".concat(r<=0?"text-red-100":"text-green-100"),children:[t<=0?"-":"+","$",(0,n.Y4)(Math.abs(t),2,"","0.00")]}),(0,s.jsxs)("div",{className:"mt-3 flex flex-col",children:[(0,s.jsx)("p",{className:"text-xs text-[#848484]",children:"Referral Code:"}),(0,s.jsx)("div",{className:"flex flex-row gap-2",children:(0,s.jsx)("p",{className:"text-sm font-medium text-primary md:text-base",children:i})})]})]})}function N(e){let{order:t,pnl:r,pnlPercentage:o,onClose:l}=e,[d,u]=(0,i.useState)(""),h=(0,i.useRef)(null),x=(0,b.M)(),m=null==x?void 0:x.address,p=window.location.origin,f=encodeURI("".concat(p,"/dashboard?referral=")+d),g="Inviting frens to @stvol_official⚡ \n\nThe first-ever gamified options trading platform on-chain, built for Retail\n  \nEarn extra points joining with this link: ".concat(f),N=(0,i.useCallback)(async()=>{if(m)try{await (0,c.Xx)(x);let e=await (0,c.et)(m);e&&u(e.code)}catch(e){console.error("Failed to fetch user profile:",e)}},[m,x]);(0,i.useEffect)(()=>{m&&N()},[m,N]);let C=async()=>{if(h.current)try{return await v.YM(h.current)}catch(e){return console.error("Failed to capture content:",e),y.Am.error("Failed to capture content"),null}},P=async e=>{try{let t=await C();if(!t)return;if(/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)){let r=window.open();if(!r){y.Am.error("Popup is blocked. Please check your browser settings.");return}r.document.write('<img src="'.concat(t,'" alt="StVol Trade Result"/>')),r.document.title=e,y.Am.success("You can save the image by long-pressing.")}else{let r=document.createElement("a");r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}catch(e){console.error("Failed to download image:",e),y.Am.error("Failed to download image")}},k=async()=>{try{window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(g)),"_blank")}catch(e){y.Am.error("Failed to share on Twitter")}},S=async e=>{try{await navigator.clipboard.writeText(e),y.Am.success("Referral url copied to clipboard!")}catch(e){console.error("Failed to copy:",e),y.Am.error("Failed to copy to clipboard")}};return(0,s.jsxs)("div",{className:"mx-auto flex max-h-screen w-[90%] flex-col gap-4 overflow-y-auto rounded-2xl bg-navy-30 py-5 md:w-[408px]",children:[(0,s.jsx)("div",{className:"flex flex-row justify-end px-4",children:(0,s.jsx)(a.default,{className:"cursor-pointer",src:"/orderpopup_close.svg",width:24,height:24,alt:"Close",onClick:l})}),(0,s.jsxs)("div",{className:"flex flex-col px-5 py-3",children:[(0,s.jsxs)("div",{ref:h,className:"flex flex-col overflow-hidden rounded-2xl border-2 border-profit-share-gradient-border px-5 py-6",children:[(0,s.jsx)("a",{href:"/",children:(0,s.jsx)(a.default,{src:"/header_logo.svg",alt:"StVol Logo",width:115,height:20})}),(0,s.jsx)("p",{className:"mt-2 text-xs text-[#848484]",children:(0,n.i$)(t.createdAt,"yyyy-MM-dd HH:mm:ss")}),(0,s.jsx)(j,{order:t}),(0,s.jsx)(w,{pnl:r,pnlPercentage:o,code:d})]}),(0,s.jsxs)("div",{className:"mt-5 flex flex-row items-center justify-center gap-2",children:[(0,s.jsx)(a.default,{src:"/share.svg",alt:"Share",width:24,height:24}),(0,s.jsx)("p",{className:"text-white text-base font-medium",children:"Share your trade!"})]}),(0,s.jsxs)("div",{className:"my-6 flex flex-row justify-center gap-6",children:[(0,s.jsx)(_,{src:"/order_result_telegram.svg",srcOn:"/order_result_telegram_on.svg",alt:"Telegram",onClick:()=>{let e="https://t.me/share/url?url=".concat(f,"&text=").concat(encodeURI(g));window.open(e,"_blank")}}),(0,s.jsx)(_,{src:"/order_result_x.svg",srcOn:"/order_result_x_on.svg",alt:"X",onClick:k}),(0,s.jsx)(_,{src:"/order_result_copy.svg",srcOn:"/order_result_copy_on.svg",alt:"Copy",onClick:()=>S(f)}),(0,s.jsx)(_,{src:"/order_result_download.svg",srcOn:"/order_result_download_on.svg",alt:"Download",onClick:()=>P("stvol_trade_result.png")})]})]})]})}function C(e){let{order:t,pnl:r,pnlPercentage:n}=e,[o,a]=(0,i.useState)(!1),d=n>0?"(+".concat(n.toFixed(2),"%)"):"(-100%)";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>{a(!0)},children:(0,s.jsx)("p",{className:"font-bold ".concat(n<=0?"text-red-500":"text-green-500"),children:d})}),(0,s.jsx)(l.Z,{show:o,"aria-labelledby":"modal-profitshare-label",onHide:()=>a(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"bg-black/50 fixed inset-0 z-[500]"}),className:"fixed left-1/2 top-1/2 z-[501] w-full -translate-x-1/2 -translate-y-1/2 transform border-0 outline-none md:w-auto",children:(0,s.jsx)(N,{order:t,pnl:r,pnlPercentage:n,onClose:()=>a(!1)})})]})}function P(e){return(0,u.WU)(e,"HH:mm")}function k(e){return g.IY+36e5*e}function S(e){let{order:t,address:r}=e,{data:i}=(0,c.ay)(t.epoch,t.productId),o=(null==i?void 0:i.startPrice)||0,l=(null==i?void 0:i.endPrice)||0,a=x.b[t.productId],d=t.overUser==t.underUser,u=t.unit,h=t.overPrice,m=t.underPrice,p=0==t.winPosition,f=1==t.winPosition;t.winPosition;let g=t.overUser==r&&t.underUser==r?100:t.overUser==r?h:m,y=g*u,b=0,v=0;return t.overUser==r&&p||t.underUser==r&&f?v=(b=100*t.unit-y-t.fee)/y*100:b=-y,(0,s.jsxs)("tr",{className:"text-center h-14",children:[(0,s.jsx)("td",{children:t.id}),(0,s.jsx)("td",{children:x.b[t.productId].symbol}),(0,s.jsxs)("td",{children:[(0,n.XY)(o,t.strike,a.precision),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-gray-50",children:[t.strike/100,"%"]})]}),(0,s.jsx)("td",{children:t.overUser==r&&t.underUser==r?"Both":t.overUser==r?"Over":"Under"}),(0,s.jsx)("td",{children:d?(0,s.jsxs)("div",{children:["Over: ",h,(0,s.jsx)("br",{}),"Under: ",m]}):g}),(0,s.jsx)("td",{children:(0,n.Y4)(u,0)}),(0,s.jsx)("td",{children:(0,n.Y4)(y,0)}),(0,s.jsx)("td",{children:o>0&&l>0?(0,s.jsxs)("div",{children:[(0,n.Y4)(b,2,"","0.00"),(0,s.jsx)("br",{}),(0,s.jsx)(C,{order:t,pnl:b,pnlPercentage:v})]}):"TBD"}),(0,s.jsx)("td",{children:P(t.createdAt)})]},t.id)}function I(e){let{order:t}=e,{data:r}=(0,c.ay)(t.epoch,t.productId),i=x.b[t.productId],o=t.unit,l=t.price;return(0,s.jsxs)("tr",{className:"text-center h-14 "+(t.collected?"text-gray-50":""),children:[(0,s.jsx)("td",{children:t.id}),(0,s.jsx)("td",{children:x.b[t.productId].symbol}),(0,s.jsxs)("td",{children:[(0,n.XY)(null==r?void 0:r.startPrice,t.strike,i.precision),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-gray-50",children:[t.strike/100,"%"]})]}),(0,s.jsx)("td",{children:0==t.position?"Over":"Under"}),(0,s.jsx)("td",{children:l}),(0,s.jsx)("td",{children:(0,n.Y4)(o,0)}),(0,s.jsx)("td",{children:(0,n.Y4)(o*l,0)}),(0,s.jsx)("td",{children:P(t.createdAt)}),(0,s.jsx)("td",{children:null==t.refundedAt?"not yet":"✓"})]})}function U(e){let{content:t,onClose:r}=e,o=null==t?void 0:t.address,[l,u]=(0,i.useState)(1),{data:x}=(0,c.ay)((null==t?void 0:t.epoch)||0,0),{data:m,mutate:p}=(0,c.Gm)((null==t?void 0:t.epoch)||0,null!=o?o:"",10,l),{data:f,mutate:g}=(0,c.L2)("unfilled",(null==t?void 0:t.epoch)||0,void 0,null!=o?o:"",10,l),[y,b]=(0,i.useState)("Filled"),v=null==f?void 0:f.data,_=null==m?void 0:m.data,j=(0,n.vW)(null==x?void 0:x.endTimestamp,"HH:mm");return(0,s.jsxs)("div",{className:"flex flex-col w-[100%] md:w-[1208px] bg-navy-40  gap-4 rounded-2xl py-5 max-h-[90vh] mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-row items-start px-5",children:[(0,s.jsxs)("div",{className:"text-xl font-bold text-gray-99",children:[(0,s.jsxs)("h1",{children:["Round #",null==x?void 0:x.epoch]}),x&&(0,s.jsxs)("h1",{className:"text-xs mt-1",children:[(0,n.vW)(x.startTimestamp,"yyyy-MM-dd HH:mm")," ~"," ","00:00"==j?"24:00":j]})]}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(a.default,{className:"cursor-pointer",src:"/orderpopup_close.svg",width:24,height:24,alt:"Close",onClick:r})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center md:px-4 text-xl pb-8 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-2 mb-4 self-start px-4 md:px-0",children:[(0,s.jsx)(d.Z,{label:"Filled",selected:y,setter:b,size:null==m?void 0:m.totalCount}),(0,s.jsx)(d.Z,{label:"Unfilled",selected:y,setter:b,size:null==f?void 0:f.totalCount})]}),(0,s.jsxs)("div",{className:"w-full rounded-2xl overflow-auto",children:[(0,s.jsxs)("table",{className:"w-full text-xs md:text-sm table-auto bg-panel",children:[(0,s.jsx)("thead",{className:"h-12 bg-navy-30",children:"Unfilled"==y?(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{children:"ID"}),(0,s.jsx)("td",{children:"Asset"}),(0,s.jsx)("td",{children:"Strike"}),(0,s.jsx)("td",{children:"Position"}),(0,s.jsx)("td",{children:"Price"}),(0,s.jsx)("td",{children:"Unit"}),(0,s.jsx)("td",{children:"Amount"}),(0,s.jsx)("td",{children:"Time"}),(0,s.jsx)("td",{children:"Refunded"})]}):(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{children:"ID"}),(0,s.jsx)("td",{children:"Asset"}),(0,s.jsx)("td",{children:"Strike"}),(0,s.jsx)("td",{children:"Position"}),(0,s.jsx)("td",{children:"Price"}),(0,s.jsx)("td",{children:"Unit"}),(0,s.jsx)("td",{children:"Amount"}),(0,s.jsx)("td",{children:"Result"}),(0,s.jsx)("td",{children:"Time"})]})}),(0,s.jsxs)("tbody",{children:["Unfilled"==y&&v&&v.map(e=>(0,s.jsx)(I,{order:e},e.id)),"Filled"==y&&_&&_.map(e=>(0,s.jsx)(S,{order:e,address:o},e.id))]})]}),(0,s.jsx)("div",{className:"flex flex-row",children:(0,s.jsx)(h.R,{onPageChange:e=>{u(e.selected+1)},pageCount:"Unfilled"==y?Math.ceil(((null==f?void 0:f.totalCount)||0)/10):Math.ceil(((null==m?void 0:m.totalCount)||0)/10)})})]})]})]})}function L(e){let{data:t,currentEpoch:r,address:i,onClickDetail:o}=e,l=(0,n.vW)((k(t.epoch)+36e5)/1e3,"HH:mm");return(0,s.jsxs)("tr",{className:"text-center h-14 cursor-pointer hover:bg-navy-30 ",onClick:()=>{o(t.epoch)},children:[(0,s.jsxs)("td",{className:"cursor-pointer hover:bg-navy-30",children:["#",t.epoch]}),(0,s.jsxs)("td",{className:"hidden md:table-cell",children:[(0,n.vW)(k(t.epoch)/1e3,"yyyy-MM-dd HH:mm")," ~"," ","00:00"==l?"24:00":l]}),(0,s.jsx)("td",{className:"text-yellow-80",children:(0,n.Y4)(t.filled+t.unfilled,0,"",0)}),(0,s.jsxs)("td",{children:[t.calculated?(0,n.Y4)(Number(t.result),2,"",0):"TBD"," ","/ ",(0,n.Y4)(t.filled,0,"",0)]}),(0,s.jsx)("td",{children:t.unfilled}),(0,s.jsx)("td",{className:t.calculated?"text-yellow-100":"",children:t.calculated?(0,n.Y4)(Number(t.result)+Number(t.unfilled),2,"","0.00"):"TBD"})]},"tr"+t.epoch)}function A(e){let{data:t}=e,r=x.b[t.productId],i=100-100*t.startPrice/t.endPrice;return(0,s.jsxs)("tr",{className:"text-center h-14 ",children:[(0,s.jsxs)("td",{children:["#",t.epoch]}),(0,s.jsx)("td",{children:r.symbol}),(0,s.jsxs)("td",{children:[(0,n.vW)(k(t.epoch)/1e3,"yyyy-MM-dd HH:mm"),(0,s.jsx)("br",{}),0==t.startPrice?"TBD":(0,n.XY)(f.O$.from(t.startPrice||0),1e4,r.precision)]}),(0,s.jsxs)("td",{children:[(0,n.vW)(k(t.epoch+1)/1e3,"yyyy-MM-dd HH:mm"),(0,s.jsx)("br",{}),0==t.endPrice?"TBD":(0,n.XY)(f.O$.from(t.endPrice||0),1e4,r.precision),t.endPrice>0&&(0,s.jsxs)("span",{className:"px-1 "+(i>0?"text-green-100":"text-red-100"),children:["(",i>0&&"+",i.toFixed(2)+"%",")"]})]})]})}function O(e){let{address:t}=e,[r,n]=(0,i.useState)(1),{data:a,mutate:u}=(0,c.qZ)(),{data:x,mutate:f}=(0,c.O5)(t,10,r),{data:g,mutate:y}=(0,c.rn)(10,r),[b,v]=(0,i.useState)("My"),_=null==x?void 0:x.data,j=null==g?void 0:g.data,[w,N]=(0,i.useState)(!1),[C,P]=(0,i.useState)({});(0,i.useEffect)(()=>{n(1)},[b]),(0,i.useEffect)(()=>{let e=(0,m.Ld)("refetch",()=>{setTimeout(()=>{f(),u()},1e3)});return()=>{(0,m.r1)(e)}},[f,u]);let k=e=>{P({epoch:e,address:t}),N(!0)};return(0,s.jsxs)("div",{id:"history",children:[(0,s.jsx)("h2",{className:"mt-20 text-xl font-bold mb-7",children:"History"}),(0,s.jsxs)("div",{className:"flex flex-row gap-2 mb-4 self-start px-4 md:px-0",children:[(0,s.jsx)(d.Z,{label:"My",selected:b,setter:v}),(0,s.jsx)(d.Z,{label:"All",selected:b,setter:v})]}),(0,s.jsxs)("div",{className:"w-full rounded-2xl overflow-hidden",children:[(0,s.jsxs)("table",{className:"w-full text-xs md:text-sm table-auto bg-panel ",children:[(0,s.jsx)("thead",{className:"h-12 bg-navy-30",children:"My"==b?(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{className:"px-2",children:"Round"}),(0,s.jsx)("td",{className:"hidden md:table-cell",children:"Time"}),(0,s.jsx)("td",{"data-tooltip-id":"tooltip","data-tooltip-content":"Filled + Unfilled","data-tooltip-place":"top",className:"cursor-pointer",children:"Ordered"}),(0,s.jsx)("td",{children:"Result / Filled"}),(0,s.jsx)("td",{children:"Unfilled"}),(0,s.jsx)("td",{"data-tooltip-id":"tooltip","data-tooltip-content":"Result + Unfilled","data-tooltip-place":"top",className:"cursor-pointer",children:"Collected"})]}):(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{className:"px-2",children:"Round"}),(0,s.jsx)("td",{className:"px-2",children:"Asset"}),(0,s.jsx)("td",{className:"px-2",children:"Start"}),(0,s.jsx)("td",{className:"px-2",children:"End"})]})}),(0,s.jsxs)("tbody",{children:["My"==b&&_&&_.map(e=>(0,s.jsx)(L,{data:e,currentEpoch:a,address:t,onClickDetail:k},e.epoch)),"My"==b&&(!_||0==_.length)&&(0,s.jsx)("tr",{className:"text-center",children:(0,s.jsx)("td",{colSpan:7,children:t?(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"my-8",children:"No transaction history."})}):(0,s.jsxs)("div",{className:"my-8",children:[(0,s.jsx)("p",{className:"mb-4",children:"Connect your wallet to view your history."}),(0,s.jsx)(o.a,{})]})})}),"All"==b&&j&&j.map(e=>(0,s.jsx)(A,{data:e},"".concat(e.epoch,"-").concat(e.productId)))]})]}),(0,s.jsx)("div",{className:"flex flex-row",children:(0,s.jsx)(h.R,{onPageChange:e=>{n(e.selected+1)},pageCount:Math.ceil((("My"==b?null==x?void 0:x.totalCount:null==g?void 0:g.totalCount)||0)/10)})}),(0,s.jsx)(p.u,{id:"tooltip"}),(0,s.jsx)(l.Z,{show:w,"aria-labelledby":"modal-1-label",onHide:()=>N(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[300]"}),className:"fixed z-[301] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full md:w-auto ",children:(0,s.jsx)(U,{content:C,onClose:()=>N(!1)})})]})]})}},81758:function(e,t,r){r.d(t,{Z:function(){return T}});var s=r(57437),n=r(76769),i=r(43425),o=r(2265),l=r(41450),a=r(54520),d=r(81613),c=r(77102),u=r(31716),h=r(48545),x=r(9788),m=r(24302),p=r(22594),f=r(52527),g=r(64940),y=r(43419);function b(e){let{hasData:t}=e;return(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{children:"ID"}),(0,s.jsx)("td",{children:"Asset"}),(0,s.jsx)("td",{children:"Strike"}),(0,s.jsx)("td",{children:"Position"}),(0,s.jsx)("td",{children:"Price"}),(0,s.jsx)("td",{children:"Unit"}),(0,s.jsx)("td",{children:"Amount"}),(0,s.jsx)("td",{className:"hidden md:table-cell",children:"Max Profit"}),(0,s.jsx)("td",{children:"Time"}),(0,s.jsx)("td",{className:t?"w-28":""})]})}function v(e){let{address:t,order:r}=e,l=(0,n.M)(),d=(0,m.DU)(),y=(0,g.l)(),[b,v]=(0,o.useState)(!1),_=r.unit,j=r.price,{data:w}=(0,a.ay)(r.epoch,r.productId),N=x.b[r.productId];return(0,s.jsxs)("tr",{className:"text-center h-14",children:[(0,s.jsx)("td",{children:r.id}),(0,s.jsx)("td",{children:x.b[r.productId].symbol}),(0,s.jsxs)("td",{children:[(0,i.XY)(p.O$.from((null==w?void 0:w.startPrice)||0),r.strike,N.precision),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-gray-50",children:[r.strike/100,"%"]})]}),(0,s.jsx)("td",{className:"over"==r.position?"text-green-100":"text-red-100",children:"over"==r.position?"Over":"Under"}),(0,s.jsx)("td",{children:j}),(0,s.jsx)("td",{children:(0,i.Y4)(_,0)}),(0,s.jsx)("td",{children:(0,i.Y4)(_*j,0)}),(0,s.jsx)("td",{className:"hidden md:table-cell",children:(0,i.Y4)(_*(100-j),0)}),(0,s.jsx)("td",{children:(0,i.i$)(r.createdAt)}),(0,s.jsx)("td",{className:"w-28  ",children:(0,s.jsx)("button",{className:"text-gray-40 border-gray-40 rounded-full border  hover:text-yellow-50 px-2 md:px-4 py-1 hover:border-yellow-50",onClick:async()=>{if(!b){if(h.n.track("Button Clicked",{"Button Name":"Cancel",Component:"MyPosition"}),d){y((0,c.sX)()).catch(e=>{});return}if(t)try{v(!0),await (0,a.Xx)(l);let e=await (0,a.sl)(r.id,t);console.info("contract call successs",e),(0,u.j8)("refetch"),h.n.track("Order Canceled",{"Order Id":r.id,"User Address":t,Component:"MyPosition","Canceled Order":e})}catch(e){console.error("contract call failure",e),(0,i.Sm)(e)}finally{v(!1)}}},children:b?(0,s.jsx)(f.Z,{color:"#fff",loading:!0,size:5,"aria-label":"Loading Spinner","data-testid":"loader"}):"Cancel"})})]})}function _(){let{address:e}=(0,n.M)()||{},{data:t}=(0,a.qZ)(),[r,l]=(0,o.useState)(1),{data:c,mutate:x}=(0,a.L2)("unfilled",t||0,void 0,null!=e?e:"",10,r),m=null==c?void 0:c.data,p=[1e4,10100,9900,9950,10050];null==p||p.slice().sort((e,t)=>t-e),(0,o.useEffect)(()=>{let e=(0,u.Ld)("refetch",x);return()=>{(0,u.r1)(e)}},[x]);let f=null==m?void 0:m.slice().sort(i.Ij),g=f&&f.length>0;return(0,s.jsxs)("div",{className:"w-full rounded-2xl overflow-hidden",children:[(0,s.jsxs)("table",{className:"w-full text-xs md:text-sm table-auto bg-panel",children:[(0,s.jsx)("thead",{className:"h-12 bg-navy-30",children:(0,s.jsx)(b,{hasData:g})}),(0,s.jsxs)("tbody",{children:[f&&f.map(t=>(0,s.jsx)(v,{address:e,order:t},t.id)),!g&&(0,s.jsx)("tr",{className:"text-center",children:(0,s.jsx)("td",{colSpan:10,children:e?(0,s.jsxs)("div",{className:"my-8",children:[(0,s.jsx)("p",{children:"No unfilled positions currently."}),(0,s.jsx)("button",{onClick:()=>{h.n.track("Button Clicked",{"Button Name":"Start New Order",Component:"MyPosition"}),(0,u.j8)("OpenOrderPopup")},className:"rounded-full border border-yellow-100 px-5 py-2 mt-6 text-yellow-100 hover:text-gray-0 hover:bg-yellow-100",children:"Start New Order"})]}):(0,s.jsxs)("div",{className:"my-8",children:[(0,s.jsx)("p",{className:"mb-4",children:"Connect your wallet to view your positions."}),(0,s.jsx)(y.a,{})]})})})]})]}),(0,s.jsx)("div",{className:"flex flex-row",children:(0,s.jsx)(d.R,{onPageChange:e=>{l(e.selected+1)},pageCount:Math.ceil(((null==c?void 0:c.totalCount)||0)/10)})})]})}var j=r(70892),w=r(21216);function N(){return(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{children:"ID"}),(0,s.jsx)("td",{children:"Asset"}),(0,s.jsx)("td",{children:"Strike"}),(0,s.jsx)("td",{children:"Position"}),(0,s.jsx)("td",{children:"Price"}),(0,s.jsx)("td",{children:"Unit"}),(0,s.jsx)("td",{className:"hidden md:table-cell",children:"Amount"}),(0,s.jsx)("td",{"data-tooltip-id":"tooltip","data-tooltip-content":"Estimated PnL","data-tooltip-place":"top",className:"cursor-pointer",children:"PnL"}),(0,s.jsx)("td",{className:"hidden md:table-cell",children:"Time"}),(0,s.jsx)("td",{})]})}let C=(e,t)=>{if(e){for(let r of e)if(r.strike===t)return r}return{strike:t,overPrice:0,underPrice:0}};function P(e){let{address:t,order:r,data:n,onClosePosition:o}=e,l=r.unit,d=r.overPrice,c=r.underPrice;console.log(r);let{data:u}=(0,a.ay)(r.epoch,r.productId),h=x.b[r.productId],m=r.overUser==t&&r.underUser==t?100:r.overUser==t?d:c,f=0;return n&&(f=(r.overUser==t&&r.underUser==t?0:r.overUser==t?n.overPrice-r.overPrice:n.underPrice-r.underPrice)*l),(0,s.jsxs)("tr",{className:"text-center h-14",children:[(0,s.jsx)("td",{children:r.id}),(0,s.jsx)("td",{children:x.b[r.productId].symbol}),(0,s.jsxs)("td",{children:[(0,i.XY)(p.O$.from((null==u?void 0:u.startPrice)||0),r.strike,h.precision),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-gray-50",children:[r.strike/100,"%"]})]}),(0,s.jsx)("td",{className:r.overUser==t&&r.underUser==t?"":r.overUser==t?"text-green-100":"text-red-100",children:r.overUser==t&&r.underUser==t?"Both":r.overUser==t?"Over":"Under"}),(0,s.jsx)("td",{children:m}),(0,s.jsx)("td",{children:(0,i.Y4)(l,0)}),(0,s.jsx)("td",{className:"hidden md:table-cell",children:(0,i.Y4)(m*l,0)}),(0,s.jsx)("td",{children:(0,i.ll)(f,0)}),(0,s.jsx)("td",{className:"hidden md:table-cell",children:(0,i.i$)(r.createdAt)}),(0,s.jsx)("td",{className:"md:w-28",children:r.overUser!=r.underUser&&(0,s.jsx)("button",{className:"text-gray-40 border-gray-40 rounded-full border  hover:text-yellow-50 px-2 md:px-4 py-1 hover:border-yellow-50",onClick:()=>{o(r)},children:"Close"})})]})}function k(){let{address:e}=(0,n.M)()||{},{data:t}=(0,a.qZ)(),[r,l]=(0,o.useState)(1),{data:m,mutate:p}=(0,a.xk)(t||0,e,10,r),f=null==m?void 0:m.data,g=null==f?void 0:f.slice().sort(i.Ij);(0,o.useEffect)(()=>{let e=(0,u.Ld)("refetch",p);return()=>{(0,u.r1)(e)}},[p]);let{data:b}=(0,a._f)(t||0,x.b.map(e=>e.id),c.Tk),[v,_]=(0,o.useState)(!1),[k,S]=(0,o.useState)({}),I=t=>{h.n.track("Button Clicked",{"Button Name":"Close Position",Component:"MyPosition"}),e&&(S(t),_(!0))},U=g&&g.length>0;return(0,s.jsxs)("div",{className:"w-full rounded-2xl overflow-hidden",children:[(0,s.jsxs)("table",{className:"w-full text-xs md:text-sm table-auto bg-panel",children:[(0,s.jsx)("thead",{className:"h-12 bg-navy-30",children:(0,s.jsx)(N,{})}),(0,s.jsxs)("tbody",{children:[b&&g&&g.map(t=>(0,s.jsx)(P,{address:e,order:t,data:C(b[t.productId],t.strike),onClosePosition:I},t.id)),!U&&(0,s.jsx)("tr",{className:"text-center",children:(0,s.jsx)("td",{colSpan:10,children:e?(0,s.jsxs)("div",{className:"my-8",children:[(0,s.jsx)("p",{children:"No filled orders currently."}),(0,s.jsx)("button",{onClick:()=>{h.n.track("Button Clicked",{"Button Name":"Start New Order",Component:"MyPosition"}),(0,u.j8)("OpenOrderPopup")},className:"rounded-full border border-yellow-100 px-5 py-2 mt-6 text-yellow-100 hover:text-gray-0 hover:bg-yellow-100",children:"Start New Order"})]}):(0,s.jsxs)("div",{className:"my-8",children:[(0,s.jsx)("p",{className:"mb-4",children:"Connect your wallet to view your positions."}),(0,s.jsx)(y.a,{})]})})})]})]}),(0,s.jsx)("div",{className:"flex flex-row",children:(0,s.jsx)(d.R,{onPageChange:e=>{l(e.selected+1)},pageCount:Math.ceil(((null==m?void 0:m.totalCount)||0)/10)})}),(0,s.jsx)(w.Z,{show:v,"aria-labelledby":"modal-1-label",onHide:()=>{_(!1)},renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[300]"}),className:"fixed z-[301] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full md:w-auto",children:(0,s.jsx)(j.Z,{filledOrder:k,onClose:()=>_(!1)})})]})}function S(){return(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{children:"Asset"}),(0,s.jsx)("td",{children:"Strike"}),(0,s.jsx)("td",{children:"ID"}),(0,s.jsx)("td",{children:"Position"}),(0,s.jsx)("td",{children:"Price"}),(0,s.jsx)("td",{children:"Unit"}),(0,s.jsx)("td",{"data-tooltip-id":"tooltip","data-tooltip-content":"Fixed PnL","data-tooltip-place":"top",className:"cursor-pointer",children:"PnL"}),(0,s.jsx)("td",{children:"Time"})]})}function I(e){let{position:t}=e;return(0,s.jsx)("p",{className:"over"==t?"text-green-500":"text-red-500",children:"over"==t?"Over":"Under"})}function U(e){let{order:t}=e,{data:r}=(0,a.ay)(t.epoch,t.productId),n=x.b[t.productId];return t.originalPrice,t.unit,t.pnl,(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("tr",{className:"h-2"}),(0,s.jsxs)("tr",{className:"text-center h-6",children:[(0,s.jsx)("td",{rowSpan:2,children:n.symbol}),(0,s.jsxs)("td",{rowSpan:2,children:[(0,i.XY)(p.O$.from((null==r?void 0:r.startPrice)||0),t.strike,n.precision),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-gray-50",children:[t.strike/100,"%"]})]}),(0,s.jsxs)("td",{children:["#",t.originalFilledOrderId]}),(0,s.jsx)("td",{children:(0,s.jsx)(I,{position:t.originalPosition})}),(0,s.jsxs)("td",{children:["$",t.originalPrice]}),(0,s.jsx)("td",{rowSpan:2,children:(0,i.Y4)(t.unit,0)}),(0,s.jsx)("td",{rowSpan:2,className:"text-yellow-500",children:(0,i.ll)(t.pnl,0)}),(0,s.jsx)("td",{rowSpan:2,children:(0,i.i$)(t.createdAt)})]}),(0,s.jsxs)("tr",{className:"text-center h-6",children:[(0,s.jsxs)("td",{children:["#",t.newFilledOrderId]}),(0,s.jsx)("td",{children:(0,s.jsx)(I,{position:t.newPosition})}),(0,s.jsxs)("td",{children:["$",t.newPrice]})]}),(0,s.jsx)("tr",{className:"h-2"})]})}function L(){let{address:e}=(0,n.M)()||{},{data:t}=(0,a.qZ)(),[r,i]=(0,o.useState)(1),{data:l,mutate:c}=(0,a.WY)(t||0,null!=e?e:"",10,r),x=null==l?void 0:l.data,m=null==x?void 0:x.slice().sort((e,t)=>e.strike>t.strike?-1:e.strike<t.strike?1:e.id>t.id?-1:e.id<t.id?1:0);(0,o.useEffect)(()=>{let e=(0,u.Ld)("refetch",c);return()=>{(0,u.r1)(e)}},[c]);let p=m&&m.length>0;return(0,s.jsxs)("div",{className:"w-full rounded-2xl overflow-hidden",children:[(0,s.jsxs)("table",{className:"w-full text-xs md:text-sm table-auto bg-panel",children:[(0,s.jsx)("thead",{className:"h-12 bg-navy-30",children:(0,s.jsx)(S,{})}),(0,s.jsxs)("tbody",{children:[m&&m.map(e=>(0,s.jsx)(U,{order:e},e.id)),!p&&(0,s.jsx)("tr",{className:"text-center",children:(0,s.jsx)("td",{colSpan:10,children:e?(0,s.jsxs)("div",{className:"my-8",children:[(0,s.jsx)("p",{children:"No closed orders currently."}),(0,s.jsx)("button",{onClick:()=>{h.n.track("Button Clicked",{"Button Name":"Start New Order",Component:"MyPosition"}),(0,u.j8)("OpenOrderPopup")},className:"rounded-full border border-yellow-100 px-5 py-2 mt-6 text-yellow-100 hover:text-gray-0 hover:bg-yellow-100",children:"Start New Order"})]}):(0,s.jsxs)("div",{className:"my-8",children:[(0,s.jsx)("p",{className:"mb-4",children:"Connect your wallet to view your positions."}),(0,s.jsx)(y.a,{})]})})})]})]}),(0,s.jsx)("div",{className:"flex flex-row",children:(0,s.jsx)(d.R,{onPageChange:e=>{i(e.selected+1)},pageCount:Math.ceil(((null==l?void 0:l.totalCount)||0)/10)})})]})}let A=()=>{let{address:e}=(0,n.M)()||{},{data:t}=(0,a.qZ)(),{data:r=0}=(0,a.vL)(null!=e?e:"",t||0,void 0,c.Tk);return(0,s.jsxs)("div",{className:"flex flex-row w-[150px] md:w-[200px] px-4 py-2 bg-navy-40 rounded-2xl",children:[(0,s.jsx)("div",{className:"flex-1 text-sm text-gray-50",children:"Total PnL"}),(0,s.jsx)("div",{className:"text-sm text-gray-99",children:(0,i.ll)(r,0)})]})},O="Filled (Open)";function T(){let{address:e}=(0,n.M)()||{},{data:t}=(0,a.qZ)(),[r,i]=(0,o.useState)(O),{data:d,mutate:c}=(0,a.E7)(e,null!=t?t:0);return(0,o.useEffect)(()=>{let e=(0,u.Ld)("refetch",c);return()=>{(0,u.r1)(e)}},[c]),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-20 text-xl font-bold mb-7",children:"My Position"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,s.jsx)(l.Z,{label:"Filled (Open)",selected:r,setter:i,size:null==d?void 0:d.openFilled}),(0,s.jsx)(l.Z,{label:"Filled (Closed)",selected:r,setter:i,size:null==d?void 0:d.closedFilled}),(0,s.jsx)(l.Z,{label:"Unfilled",selected:r,setter:i,size:null==d?void 0:d.unfilled})]}),(0,s.jsx)("div",{className:"flex justify-end mt-4 md:mt-0",children:(0,s.jsx)(A,{})})]}),r==O&&(0,s.jsx)(k,{}),"Filled (Closed)"==r&&(0,s.jsx)(L,{}),"Unfilled"==r&&(0,s.jsx)(_,{})]})}},96089:function(e,t,r){r.d(t,{Z:function(){return y}});var s=r(57437),n=r(66648),i=r(54520),o=r(31716),l=r(48545),a=r(2265),d=r(76769),c=r(16463),u=r(9788),h=r(43425),x=r(21216),m=r(70892),p=r(77102);function f(e){let{showPosition:t,setter:r}=e,{address:u}=(0,d.M)()||{},{data:p}=(0,i.qZ)(),f=(0,c.usePathname)(),[y,b]=(0,a.useState)(1),{data:v,mutate:_}=(0,i.xk)(p||0,u,4,y),j=null==v?void 0:v.data,w=null==j?void 0:j.slice().sort(h.Ij),N=w&&w.length>0,[C,P]=(0,a.useState)(!1),[k,S]=(0,a.useState)({}),I=e=>{l.n.track("Button Clicked",{"Button Name":"Close Position",Component:"LiteOrderMyPosition"}),u&&(S(e),P(!0))};return(0,a.useEffect)(()=>{let e=(0,o.Ld)("refetch",_);return()=>{(0,o.r1)(e)}},[_]),(0,s.jsxs)("div",{className:N&&t?"fixed ".concat("/hourly/lite"===f?"bottom-12":"bottom-0"," md:hidden flex flex-col w-full px-4 pt-6 pb-4 gap-2 z-[100] bg-navy-0"):"hidden",children:[(0,s.jsx)(n.default,{className:"cursor-pointer opacity-50 hover:opacity-100",src:"/orderpopup_close.svg",width:18,height:18,alt:"Close position",onClick:()=>{r(!1),(0,o.j8)("ClosePositionPopup",!1),b(1)}}),(0,s.jsxs)("div",{className:"flex flex-row justify-between items-center gap-1",children:[(0,s.jsx)("div",{className:"mx-1 "+(1==y?"text-gray-400 cursor-not-allowed":"text-gray-99"),children:(0,s.jsx)("button",{className:"px-3 py-2 border border-gray-300 rounded ",onClick:()=>{1!=y&&b(y-1)},children:"<<"})}),(0,s.jsx)("div",{className:"flex flex-row justify-start flex-1 items-center gap-2 overflow-x-scroll scrollbar-hide",children:N&&w&&w.map(e=>(0,s.jsx)(g,{order:e,onClosePosition:I},e.id))}),(0,s.jsx)("div",{className:"mx-1 "+(Math.ceil(((null==v?void 0:v.totalCount)||0)/4)==y?"text-gray-400 cursor-not-allowed":"text-gray-99"),children:(0,s.jsx)("button",{className:"px-3 py-2 border border-gray-300 rounded ",onClick:()=>{Math.ceil(((null==v?void 0:v.totalCount)||0)/4)!=y&&b(y+1)},children:">>"})})]}),(0,s.jsx)(x.Z,{show:C,"aria-labelledby":"modal-1-label",onHide:()=>{P(!1)},renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[300] "}),className:"fixed z-[301] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full md:w-auto",children:(0,s.jsx)(m.Z,{filledOrder:k,onClose:()=>P(!1)})})]})}function g(e){let{order:t,onClosePosition:r}=e,{address:n}=(0,d.M)()||{},{data:o}=(0,i.qZ)(),l=0,{data:c}=(0,i._f)(o||0,u.b.map(e=>e.id),p.Tk),x=((e,t)=>{if(e){for(let r of e)if(r.strike===t)return r}return{strike:t,overPrice:0,underPrice:0}})(c[t.productId],t.strike);c&&(l=(t.overUser==n&&t.underUser==n?0:t.overUser==n?x.overPrice-t.overPrice:x.underPrice-t.underPrice)*t.unit);let[m,f]=(0,a.useState)("bg-navy-40");return(0,a.useEffect)(()=>{f("bg-navy-50");let e=setTimeout(()=>f("bg-navy-40"),300);return()=>clearTimeout(e)},[l]),(0,s.jsxs)("div",{className:"flex flex-col items-center min-w-[130px] text-sm border border-navy-50 rounded-2xl py-3 px-4 cursor-pointer  hover:border-navy-70 "+m,onClick:()=>{t.overUser!=t.underUser&&r(t)},children:[(0,s.jsx)("p",{className:"text-gray-99",children:u.b[t.productId].symbol}),(0,s.jsxs)("div",{className:"flex flex-row gap-1 ",children:[(0,s.jsx)("p",{className:t.overUser==n&&t.underUser==n?"":t.overUser==n?"text-green-100":"text-red-100",children:t.overUser==n&&t.underUser==n?"Both":t.overUser==n?"Over":"Under"}),(0,s.jsxs)("p",{className:"text-gray-50",children:[t.strike/100,"%"]})]}),(0,s.jsx)("p",{className:"text-xs "+(0==l?"text-gray-99":l>0?"text-green-100":"text-red-100"),children:(0,h.ll)(l,0)})]},t.id)}function y(){let{address:e}=(0,d.M)()||{},t=(0,c.usePathname)(),{data:r,isLoading:u}=(0,i.qZ)(),{data:h,mutate:x}=(0,i.E7)(e,null!=r?r:0),[m,p]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=(0,o.Ld)("refetch",x);return()=>{(0,o.r1)(e)}},[x]),(0,a.useEffect)(()=>{let e=(0,o.Ld)("OpenPositionPopup",()=>{p(!m),setTimeout(()=>{(0,o.j8)("CloseOrderPopup")},1e3)});return()=>{(0,o.r1)(e)}},[]),(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsxs)("div",{className:"fixed ".concat("/hourly/lite"===t?"bottom-[7rem]":"bottom-[5rem]","  right-4 z-50 md:hidden p-2"),children:[(0,s.jsx)("div",{className:"absolute right-1",children:(0,s.jsx)("div",{className:"relative bg-yellow-100 rounded-full w-5 h-5 text-navy-0 font-bold text-[10px] text-center",children:(0,s.jsx)("span",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:null==h?void 0:h.openFilled})})}),(0,s.jsx)("button",{onClick:()=>{h&&0!=h.openFilled&&(l.n.track("Button Clicked",{"Button Name":"Lite Position Icon Mobile",Component:"Hourly/Lite"}),p(!0))},children:(0,s.jsx)(n.default,{src:"/position_icon_mobile.svg",width:52,height:52,alt:"Position icon"})})]}),(0,s.jsx)(f,{showPosition:m,setter:p})]})}},41450:function(e,t,r){r.d(t,{Z:function(){return n}});var s=r(57437);function n(e){let{label:t,size:r,selected:n,setter:i}=e;return(0,s.jsxs)("div",{onClick:()=>i(t),className:"px-[10px] py-[6px] text-sm font-semibold rounded-lg cursor-pointer "+(t===n?"bg-yellow-100 text-black":"bg-transparent border text-gray-50 border-gray-50 hover:text-yellow-50 hover:border-yellow-50"),children:[t," ",Number.isInteger(r)?"(".concat(r,")"):""]})}},75209:function(e,t,r){r.d(t,{Y:function(){return l}});var s=r(57437),n=r(43425),i=r(87138),o=r(16463);function l(){let e=(0,o.usePathname)();return(0,s.jsxs)("div",{className:"hidden md:flex flex-row items-center gap-2",children:[(0,s.jsx)(i.default,{href:"/hourly/lite",className:(0,n.cn)("/hourly/lite"===e?"bg-yellow-100 text-black":"border border-gray-50 text-gray-50 hover:border-yellow-50 hover:text-yellow-50","px-2 py-1 text-sm font-semibold rounded-lg cursor-pointer "),children:"Lite"}),(0,s.jsx)(i.default,{href:"/hourly",className:(0,n.cn)("/hourly"==e?"bg-yellow-100 text-black":"border border-gray-50 text-gray-50 hover:border-yellow-50 hover:text-yellow-50","px-2 py-1 text-sm font-semibold rounded-lg cursor-pointer "),children:"Degen"})]})}},70567:function(e,t,r){r.d(t,{O:function(){return M},Z:function(){return D}});var s=r(57437),n=r(66648),i=r(2265),o=r(43425),l=r(54520);function a(e){let{epoch:t,productId:r,strike:n,position:i}=e,a="over"==i?"text-green-100":"text-red-100",{data:d}=(0,l.s3)(t,r,n,i);return(0,s.jsxs)("div",{className:"flex flex-col flex-1 gap-2",children:[(0,s.jsx)("div",{className:"flex items-center justify-center py-2 font-semibold border-t border-b border-gray-40 "+a,children:"over"==i?"Over":"Under"}),(0,s.jsxs)("table",{className:"table-auto",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-[10px] text-gray-50",children:[(0,s.jsx)("td",{children:"PRICE"}),(0,s.jsx)("td",{children:"PAYOUT"}),(0,s.jsx)("td",{className:"text-right",children:"ORDER UNIT"})]})}),(0,s.jsx)("tbody",{children:null==d?void 0:d.map(e=>{let t=e.price;return(0,s.jsxs)("tr",{className:"text-xs h-5",children:[(0,s.jsxs)("td",{children:["$",(0,o.Y4)(t,0)]}),(0,s.jsx)("td",{className:"text-gray-50",children:(0,o.Y4)(100/t,2,"x")}),(0,s.jsx)("td",{className:"text-right",children:e.unit})]},t)})})]})]})}function d(e){let{epoch:t,productId:r,strike:n}=e;return(0,s.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,s.jsx)(a,{epoch:t,productId:r,strike:n,position:"under"}),(0,s.jsx)(a,{epoch:t,productId:r,strike:n,position:"over"})]})}var c=r(91825),u=r(59392);function h(e){let{round:t,over:r,under:n,position:o,defaultWidth:l=350,height:a=300,marginTop:d=20,marginRight:h=10,marginBottom:x=20,marginLeft:m=30}=e,p=(0,i.useRef)(null),[f,g]=(0,i.useState)(l);return(0,i.useEffect)(()=>{let e=()=>{window.innerWidth<600?g(280):g(l)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[l]),(0,i.useEffect)(()=>{let e=u.Ys(p.current),s=u.Xf().domain([1e3*t.startTimestamp,1e3*t.endTimestamp]).range([m,f-h]),i=u.BYU([0,100],[a-x,d]),l=u.jvg().x(e=>s(new Date(e.createdAt).getTime())).y(e=>i(e.price)),g=o==c.Ly.Over?"#04D56F":"#04D56F50",y=o==c.Ly.Under?"#FF5D5D":"#FF5D5D70",b=(t,r,n)=>{let o=e.select("#".concat(t));if(o.empty()?e.append("path").datum(r).attr("id",t).attr("fill","none").attr("stroke",n).attr("stroke-width",1.5).attr("d",l):o.datum(r).attr("d",l).attr("stroke",n),r.length>0){let o=r[r.length-1],l=e.select("#".concat(t,"Circle"));if(l.empty()){l=e.append("g").attr("fill",n).attr("stroke",n).attr("stroke-width",1.5).append("circle").attr("id","".concat(t,"Circle")).attr("cx",s(new Date(o.createdAt).getTime())).attr("cy",i(o.price)).attr("r",2.5);let r=()=>{l.transition().ease(u.oSY).duration(1e3).attr("r",20).attr("opacity",0).on("end",()=>{l.attr("r",3.5).attr("opacity",1),r()})};r()}else l.attr("cx",s(new Date(o.createdAt).getTime())).attr("cy",i(o.price)).attr("fill",n).attr("stroke",n)}};b("overPath",r,g),b("underPath",n,y);let v=u.i$Z("%M"),_=e.select(".x-axis");_.empty()?e.append("g").attr("class","x-axis").attr("transform","translate(0,".concat(a-x,")")).call(u.LLu(s).tickFormat(e=>v(e))):_.attr("transform","translate(0,".concat(a-x,")")).call(u.LLu(s).tickFormat(e=>v(e))),e.select(".y-axis").empty()&&e.append("g").attr("class","y-axis").attr("transform","translate(".concat(m,",0)")).call(u.y4O(i))},[r,n,o,f,a,d,h,x,m,t.startTimestamp,t.endTimestamp]),(0,s.jsx)("svg",{ref:p,width:f,height:a})}function x(e){let{epoch:t,productId:r,strike:n,position:i}=e,{data:o}=(0,l.ay)(t,r),{data:a}=(0,l.Y_)(t,r,n);if(!a||!a.over||!a.under)return(0,s.jsx)(s.Fragment,{});let d=a.over.filter(e=>0!=e.price),u=a.under.filter(e=>0!=e.price),x=e=>{if(0==e.length)return!1;let t=e.length-1;return e.push({id:e[t].id+1,epoch:e[t].epoch,productId:e[t].productId,strike:e[t].strike,position:e[t].position,price:e[t].price,createdAt:new Date().toUTCString()}),!0},m=(e,t)=>{if(e.length>0){let r=e.length-1;t.push({...e[r],id:e[r].id+1,price:0,position:e[r].position==c.Ly.Over?c.Ly.Under:c.Ly.Over,createdAt:new Date().toUTCString()})}};return x(d)||m(u,d),x(u)||m(d,u),(0,s.jsx)("div",{children:(0,s.jsx)(h,{round:o,over:d,under:u,position:i})})}var m=r(76235);let p=e=>JSON.parse(e.data).price,f=e=>JSON.parse(e.data).unit,g=e=>JSON.parse(e.data).position;function y(e){let{epoch:t,productId:r,strike:n}=e,{data:i}=(0,l.oZ)(t,r,n);return i?(0,s.jsx)("div",{className:"flex flex-col flex-1 gap-2",children:(0,s.jsxs)("table",{className:"table-fixed w-full border-collapse",children:[(0,s.jsx)("thead",{className:"block w-full",children:(0,s.jsxs)("tr",{className:"text-[10px] text-gray-50 font-semibold flex w-full pr-2",children:[(0,s.jsx)("th",{className:"border-b border-b-gray-40 flex-1",children:"Time"}),(0,s.jsx)("th",{className:"border-b border-b-gray-40 flex-1",children:"Price"}),(0,s.jsx)("th",{className:"border-b border-b-gray-40 flex-1",children:"Unit"})]})}),(0,s.jsx)("tbody",{className:"w-full block h-80 overflow-y-auto",children:i.map(e=>{var t;let r="under"===g(e);return(0,s.jsxs)("tr",{className:"text-xs h-5 flex w-full",children:[(0,s.jsx)("td",{className:"flex-1 text-center",children:(t=e.createdAt,(0,m.WU)(t,"HH:mm"))}),(0,s.jsxs)("td",{className:"flex flex-1 ",children:[(0,s.jsx)("div",{className:"flex-1 text-center "+(r?"bg-red-100/30 text-red-100":""),children:r?p(e):""}),(0,s.jsx)("div",{className:"flex-1 text-center "+(r?"":"bg-green-100/30 text-green-100"),children:r?"":p(e)})]}),(0,s.jsx)("td",{className:"flex-1  text-center",children:f(e)})]},e.id)})})]})}):(0,s.jsx)(s.Fragment,{})}let b={OrderBook:"Orderbook",PriceTrend:"Price trend",Trades:"Trades"};function v(e){let{info:t,selectedInfo:r,setSelectedInfo:n}=e,i=t==r?"px-2 py-1 md:px-3 md:py-2 text-sm bg-black rounded-lg text-yellow-100 border border-yellow-100":"px-2 py-1 md:px-3 md:py-2 text-sm border rounded-lg text-gray-40 border-gray-40 hover:text-yellow-50 hover:border-yellow-50";return(0,s.jsx)("div",{className:i+" cursor-pointer transition-all",onClick:()=>{n(t)},children:t})}let _=i.memo(function(e){let{epoch:t,productId:r,strike:n,position:o,orderType:l}=e,[a,u]=(0,i.useState)(b.OrderBook);return(0,i.useEffect)(()=>{u(l===c.mr.Limit?b.OrderBook:b.PriceTrend)},[l]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-row gap-1 md:gap-2 mb-4",children:[(0,s.jsx)(v,{info:b.OrderBook,selectedInfo:a,setSelectedInfo:u}),(0,s.jsx)(v,{info:b.PriceTrend,selectedInfo:a,setSelectedInfo:u}),(0,s.jsx)(v,{info:b.Trades,selectedInfo:a,setSelectedInfo:u})]}),a==b.OrderBook&&(0,s.jsx)(d,{epoch:t,productId:r,strike:n}),a==b.PriceTrend&&(0,s.jsx)(x,{epoch:t,productId:r,strike:n,position:o}),a==b.Trades&&(0,s.jsx)(y,{epoch:t,productId:r,strike:n})]})},(e,t)=>e.epoch===t.epoch&&e.productId===t.productId&&e.strike===t.strike&&e.position===t.position&&e.orderType===t.orderType);var j=r(21216),w=r(24302),N=r(76769),C=r(34309),P=r(4815),k=r(64940),S=r(77102),I=r(31716),U=r(22594),L=r(91781),A=r(76230),O=r(8581),T=r(21298),F=r(90854),E=r(48545);function M(e){let{selected:t,setter:r,bgcolor:n="bg-navy-0"}=e;return(0,s.jsxs)("div",{className:"relative flex flex-row rounded-full h-11 "+n,children:[(0,s.jsx)("div",{className:"absolute w-1/2 transition-all rounded-full h-11 "+(t==c.Ly.Under?"bg-red-100 left-0":"bg-green-100 left-1/2")}),(0,s.jsx)("div",{onClick:()=>r(c.Ly.Under),className:"z-10 flex items-center justify-center flex-1 font-semibold h-11 cursor-pointer "+(t==c.Ly.Under?"text-navy-0":"text-gray-50 hover:text-gray-99 "),children:"Under"}),(0,s.jsx)("div",{onClick:()=>r(c.Ly.Over),className:"z-10 flex items-center justify-center flex-1 font-semibold h-11 cursor-pointer "+(t==c.Ly.Over?"text-navy-0":"text-gray-50 hover:text-gray-99 "),children:"Over"})]})}function R(e){let{type:t,selected:r,setter:n}=e;return(0,s.jsx)("div",{className:"pb-3 font-semibold cursor-pointer transition-all border-b-2 hover:text-gray-99 "+(t===r?"text-gray-99 border-b-yellow-100":"text-gray-50 border-transparent"),onClick:()=>{n(t)},children:t})}function D(e){let{round:t,strike:r,position:a,onClose:d}=e,{product:u}=(0,A.i)(),h=(0,N.M)(),x=null==h?void 0:h.address,m=(0,T.u)({client:w.Lp,chain:w.bo,address:(0,S.Uc)(),abi:F.Mt}),{data:p,isLoading:f}=(0,C.u)({contract:m,method:"allowance",params:[x,(0,S.c6)()]}),{data:g,mutate:y}=(0,l.FW)(null!=x?x:""),b=(0,l.sb)(g),[v,D]=(0,i.useState)(r),[W,B]=(0,i.useState)(c.mr.Market),[z,H]=(0,i.useState)(a),[Z,Y]=(0,i.useState)(""),[$,q]=(0,i.useState)(""),[G,X]=(0,i.useState)(!1),[J,V]=(0,i.useState)(-1),Q=(0,i.useRef)(null),[K,ee]=(0,i.useState)(!1),[et,er]=(0,i.useState)(!1),[es,en]=(0,i.useState)({}),{connect:ei}=(0,P.W)(),eo=(0,w.DU)(),el=(0,k.l)(),ea=async()=>{if(""===Z){Y(1);return}if("number"==typeof Z&&Z>0)try{q("loading..");let e=await (0,l.G7)((null==t?void 0:t.epoch)||0,u.id,v,z==c.Ly.Over?"under":"over",Z),r=e.unit,s=e.price;Z==r?q(Math.ceil(s/r)):Z>r&&(q("N/A"),V(r))}catch(e){q("")}};(0,i.useEffect)(()=>{Q.current&&(Q.current.scrollTop=-Q.current.scrollHeight)},[]),(0,i.useEffect)(()=>{V(-1),W==c.mr.Market&&ea()},[W,Z,a,z]);let ed=async(e,t,r,s,n)=>{if(!x){await ei({client:w.Lp,appMetadata:w.EY,chains:w.p5,wallets:w.fh});return}if(eo){el((0,S.sX)()).catch(e=>{});return}await (0,l.Xx)(h),X(!0);try{if(!x){console.log("no address");return}let i=e=>{if(e.result){let t=JSON.parse(e.result);t.type=e.type,en(t),ee(!0)}};if(W==c.mr.Limit){let o=await (0,l.s1)(e,u.id,t,x,"limit",0===r?"over":"under",n,s);i(o),console.info("placeLimitOrder call successs",o)}else{let o=await (0,l.s1)(e,u.id,t,x,"market",0===r?"over":"under",n,s);i(o),console.info("placeMarketOrder call successs",o)}E.n.track("Order Placed",{"User Address":x,"Round Epoch":e,"Product Id":u.id,"Order Strike":t,"Order Position":0===r?"Over":"Under","Order Type":W,"Order Unit":n,"Order Price":s,Component:"Hourly"}),q(""),W==c.mr.Market&&(1==Z?ea():Y(1)),(0,I.j8)("refetch")}catch(e){console.error("contract call failure",e),(0,o.Sm)(e)}X(!1)},ec="number"==typeof Z&&Z>0,eu="number"==typeof $&&$>0,eh=()=>"N/A"==$&&W==c.mr.Market,ex=!G&&(!b||b<1||ec&&eu&&b<Math.ceil($)*Z);return(0,s.jsxs)("div",{className:"flex flex-col w-[90%] md:w-[808px] bg-navy-30  gap-4 rounded-2xl py-5 max-h-[80vh] mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center px-5",children:[(0,s.jsxs)("span",{className:"text-xl font-bold text-gray-99",children:["Strike:"," ",(0,o.XY)(U.O$.from((null==t?void 0:t.startPrice)||0),v,u.precision)]}),(0,s.jsxs)("span",{className:"flex-1 px-2 text-base font-semibold text-gray-50",children:["(",v/100,"%)"]}),(0,s.jsx)(n.default,{className:"cursor-pointer",src:"/orderpopup_close.svg",width:24,height:24,alt:"Close",onClick:d})]}),(0,s.jsxs)("div",{ref:Q,className:"flex flex-col-reverse md:flex-row px-5 gap-5 overflow-y-auto",children:[(0,s.jsx)("div",{className:"flex flex-1 flex-col bg-navy-0 rounded-2xl p-4",children:(0,s.jsx)(_,{epoch:(null==t?void 0:t.epoch)||0,productId:u.id,strike:r,position:z,orderType:W})}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-3 mb-2",children:[(0,s.jsx)(R,{type:c.mr.Market,selected:W,setter:B}),(0,s.jsx)(R,{type:c.mr.Limit,selected:W,setter:B})]}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(M,{selected:z,setter:H})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 ",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center px-4 bg-navy-0 rounded-2xl border border-navy-30 has-[:focus]:border-navy-30",children:[(0,s.jsx)("label",{htmlFor:"orderunit",className:"text-sm text-gray-50",children:"Order unit"}),(0,s.jsx)("input",{id:"orderunit",type:"number",autoComplete:"off",className:"flex-1 h-12 text-right bg-navy-0 focus:outline-none",value:Z,onChange:e=>{Y(parseInt(e.target.value))}})]}),0==J?(0,s.jsx)("p",{className:"text-red-100 text-sm -mt-2 text-right",children:"Market order is currently unavailable."}):J>0&&(0,s.jsxs)("p",{className:"text-red-100 text-sm -mt-2 text-right",children:["Up to ",J.toString()," units are available now."]}),(0,s.jsxs)("div",{className:"flex flex-row items-center px-4 rounded-2xl border border-navy-30 has-[:focus]:border-navy-30 transition-all "+(W==c.mr.Market?"bg-navy-30":"bg-navy-0"),children:[(0,s.jsx)("label",{htmlFor:"orderprice",className:"text-sm text-gray-50",children:"Price"}),(0,s.jsx)("input",{readOnly:W==c.mr.Market,id:"orderprice",type:W==c.mr.Limit?"number":"text",autoComplete:"off",className:"flex-1 h-12 text-right bg-transparent focus:outline-none",value:$,onChange:e=>{let t=parseInt(e.target.value);t>99&&(t=99),t<1&&(t=1),q(t)}})]}),"number"==typeof Z&&"number"==typeof $&&"number"==typeof b&&Z*$>b&&(0,s.jsx)("p",{className:"text-red-100 text-sm -mt-2 text-right",children:"Insufficient balance to place this order."})]}),(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("div",{className:"flex flex-col px-4 py-3 bg-navy-40 rounded-2xl",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsx)("div",{className:"flex-1 text-sm text-gray-50",children:"Pay"}),(0,s.jsx)("div",{className:"text-sm text-gray-99",children:"number"==typeof Z&&Z>0&&"number"==typeof $&&$>0?"$"+(0,o.Y4)(Z*$,0):"..."})]}),(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsx)("div",{className:"flex-1 text-sm text-gray-50",children:"If wins"}),(0,s.jsxs)("div",{className:"text-sm text-gray-99",children:["$","number"==typeof Z&&Z>0?(0,o.Y4)(100*Z,0):100]})]}),(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsx)("div",{className:"flex-1 text-sm text-gray-50",children:"Payout"}),(0,s.jsx)("div",{className:"text-sm text-gray-99",children:"number"==typeof Z&&Z>0&&"number"==typeof $&&$>0?(0,o.Y4)(100/$)+"x":"..."})]})]})}),(0,s.jsxs)("div",{className:"mt-5 flex flex-row gap-4",children:[ex&&(0,s.jsx)("button",{className:"flex-1 font-semibold text-black rounded-full cursor-pointer h-14 bg-yellow-100 hover:bg-yellow-50",onClick:async()=>{E.n.track("Button Clicked",{"Button Name":x?"Deposit":"Connect",Component:"OrderPopup"}),x?er(!0):await ei({client:w.Lp,appMetadata:w.EY,chains:w.p5,wallets:w.fh})},children:x?"Deposit":"Connect"}),(0,s.jsx)("button",{disabled:!eo&&!eh()&&("number"==typeof Z&&"number"==typeof $&&"number"==typeof b&&Z*$>b||f||ex||G||!(ec&&eu)),onClick:async()=>{if(E.n.track("Button Clicked",{"Button Name":"Submit Order",Component:"OrderPopup"}),eh()){B(c.mr.Limit);return}!t||f||G||ed(t.epoch,r,z===c.Ly.Over?0:1,parseInt($+""),parseInt(Z+""))},className:"flex-1 flex items-center justify-center font-semibold rounded-full cursor-pointer h-14 disabled:bg-yellow-40 "+(eh()?"bg-gray-40 border border-yellow-100  hover:bg-yellow-100 text-yellow-100 hover:text-gray-0":"bg-yellow-100  hover:bg-yellow-50 text-black "),children:eo?"Switch Network":eh()?"Switch to Limit Order":f||G?"Loading...":"Submit Order"})]})]})]}),(0,s.jsx)(j.Z,{show:K,"aria-labelledby":"modal-1-label",onHide:()=>ee(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[400]"}),className:"fixed z-[401] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full md:w-auto  ",children:(0,s.jsx)(L.Z,{onClose:()=>ee(!1),data:es})}),(0,s.jsx)(j.Z,{show:et,"aria-labelledby":"modal-deposit-label",onHide:()=>er(!1),renderBackdrop:e=>(0,s.jsx)("div",{...e,className:"fixed inset-0 bg-black/50 z-[300]"}),className:"fixed z-[301] top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 border-0 outline-none w-full ",children:(0,s.jsx)(O.Z,{onClose:()=>er(!1)})})]})}},91781:function(e,t,r){r.d(t,{Z:function(){return h}});var s=r(57437),n=r(66648),i=r(54520),o=r(76769),l=r(25566),a=r(2265),d=r(95956),c=r(25566);let u=e=>{let{src:t,srcOn:r,alt:i,onClick:o}=e,[l,d]=(0,a.useState)(!1);return(0,s.jsx)(n.default,{className:"cursor-pointer",onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},onClick:o,src:l?r:t,width:48,height:48,alt:i})};function h(e){let{onClose:t,data:r}=e,h="market"!=r.type||r.filledUnit>0,x=(0,o.M)(),m=null==x?void 0:x.address,[p,f]=(0,a.useState)(""),g=window.location.origin?window.location.origin:c.env.NEXT_PUBLIC_REACT_APP_WEB_PATH,y=encodeURI("".concat(g,"/dashboard?referral=")+p),b="Inviting frens to @stvol_official⚡ \n\nThe first-ever gamified options trading platform on-chain, built for Retail\n  \nEarn extra points joining with this link: ".concat(y),v="https://twitter.com/intent/tweet?text=".concat(encodeURI(b)),_="https://t.me/share/url?url=".concat(y,"&text=").concat(encodeURI(b)),j=(0,a.useCallback)(async()=>{if(m){await (0,i.Xx)(x);try{let e=await (0,i.et)(m);e&&f(e.code)}catch(e){console.error("getUserProfile & getMyPoint call failure:",e),(0,l.disconnect)()}}},[m,x]);(0,a.useEffect)(()=>{m&&j()},[m,x,j]);let w=e=>{navigator.clipboard.writeText(e).then(()=>{(0,d.Am)("Referral url copied to clipboard!")}).catch(e=>{})};return(0,s.jsxs)("div",{className:"flex flex-col w-[90%] md:w-[340px] bg-navy-40 gap-4 rounded-2xl py-5 max-h-[90vh] mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-row items-start px-5 mb-4",children:[(0,s.jsx)("div",{className:"flex flex-row gap-3 mb-2"}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(n.default,{className:"cursor-pointer",src:"/orderpopup_close.svg",width:24,height:24,alt:"Close",onClick:t})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(n.default,{className:"mb-6",src:h?"/order_result_successful.svg":"/order_result_failed.svg",width:64,height:64,alt:h?"Successful":"Oops"}),(0,s.jsxs)("div",{className:"text-center text-2xl font-semibold mb-12",children:[h?"Successful!":"Oopsy!",(0,s.jsx)("br",{}),"limit"==r.type&&(0,s.jsxs)(s.Fragment,{children:[r.filledUnit>0&&(0,s.jsxs)(s.Fragment,{children:[r.filledUnit,"/",r.totalUnit," Orders Filled ",(0,s.jsx)("br",{})]}),r.placedUnit,"/",r.totalUnit," Orders Placed"]}),"market"==r.type&&(0,s.jsxs)(s.Fragment,{children:[h?"".concat(r.filledUnit,"/").concat(r.totalUnit):"No"," Orders Filled"]})]}),h&&(0,s.jsx)("div",{className:"flex w-full px-4 justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col bg-navy-0 rounded-2xl px-6 items-center pt-6",children:[(0,s.jsxs)("div",{className:"flex flex-row text-base gap-2",children:[(0,s.jsx)(n.default,{src:"/order_result_share.svg",width:20,height:20,alt:"Share"}),"Invite and get extra points!"]}),(0,s.jsxs)("div",{className:"flex flex-row gap-6 my-6",children:[(0,s.jsx)("a",{href:_,target:"_blank",children:(0,s.jsx)(u,{src:"/order_result_telegram.svg",srcOn:"/order_result_telegram_on.svg",alt:"Telegram"})}),(0,s.jsx)("a",{href:v,target:"_blank",children:(0,s.jsx)(u,{src:"/order_result_x.svg",srcOn:"/order_result_x_on.svg",alt:"X"})}),(0,s.jsx)(u,{src:"/order_result_copy.svg",srcOn:"/order_result_copy_on.svg",alt:"Copy",onClick:()=>{w(y)}})]})]})})]})]})}},66516:function(e,t,r){r.d(t,{Z:function(){return i}});var s=r(57437),n=r(2265);function i(e){let{timeinsecond:t}=e,[r,i]=(0,n.useState)(t);(0,n.useEffect)(()=>{i(t<0?0:t);let e=setInterval(()=>{i(t=>t<=1?(clearInterval(e),window.location.reload(),0):t-1)},1e3);return()=>clearInterval(e)},[t]);let o=Math.floor(r/60)%60,l=Math.floor(r/3600)%24;return(0,s.jsxs)("span",{className:"text-sm rounded-full  px-3 py-2 "+(r<=60?"text-red-100 bg-[#2c1c1c]":"text-yellow-100 bg-[#2C2B1C]"),children:["Ends in",l?l+"h":""," ",l||o?o+"m":""," ",Math.floor(r%60),"s"]})}},81613:function(e,t,r){r.d(t,{R:function(){return o}});var s=r(57437),n=r(48998),i=r.n(n);function o(e){let{onPageChange:t,pageCount:r}=e;return(0,s.jsx)("div",{className:"flex w-full",children:(0,s.jsx)(i(),{breakLabel:"…",previousLabel:"<<",nextLabel:">>",onPageChange:t,marginPagesDisplayed:1,pageRangeDisplayed:3,pageCount:r,renderOnZeroPageCount:null,containerClassName:"flex flex-1 items-center justify-center my-6 text-xs",pageClassName:"mx-1",pageLinkClassName:"px-3 py-2 border border-gray-300 rounded",previousClassName:"mx-1",nextClassName:"mx-1",previousLinkClassName:"px-3 py-2 border border-gray-300 rounded",nextLinkClassName:"px-3 py-2 border border-gray-300 rounded",breakClassName:"mx-1",breakLinkClassName:"px-3 py-2 border border-gray-300 rounded",activeClassName:"text-yellow-100",disabledClassName:"text-gray-400 cursor-not-allowed"})})}},2425:function(e,t,r){r.d(t,{O:function(){return n}});var s=r(2265);function n(e,t){(0,s.useEffect)(()=>{function r(r){e.current&&!e.current.contains(r.target)&&t()}return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[e,t])}}}]);