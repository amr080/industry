"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22061],{21823:function(e,t,r){r.d(t,{$h:function(){return b},Jx:function(){return _},OE:function(){return x},X0:function(){return g},_y:function(){return w},bq:function(){return O},gC:function(){return P},iX:function(){return y},kN:function(){return I},tl:function(){return k},uf:function(){return q},zN:function(){return S},zP:function(){return m}});var a=r(24441),n=r(52844);let i="auth",o={current_password_entropy:0,emailVerified:!1,require2FA:!1,requireVerification:!1},s=(0,a.oM)({name:"auth",initialState:o,reducers:{logout:()=>o,logoutError:(e,t)=>{e.logoutError=t.payload},require2FAReset:e=>{e.require2FA=!1},signInError:(e,t)=>{e.authError=t.payload},signInRequire2FA:(e,t)=>{e.require2FA=t.payload.require2fa},signUpError:(e,t)=>{e.signUpError=t.payload},signUpRequireVerification:(e,t)=>{e.requireVerification=t.payload.requireVerification},verificationFetch:e=>{e.emailVerified=!1},verificationSuccess:e=>{e.emailVerified=!0}},extraReducers:e=>{e.addMatcher(c.endpoints.checkEntropy.matchFulfilled,(e,t)=>{let{payload:r}=t;e.current_password_entropy=parseFloat(r.entropy)})}}),c=n.g.injectEndpoints({endpoints:e=>({changePassword:e.mutation({query:e=>({url:"".concat(i,"/resource/users/password"),method:"PUT",body:e})}),checkEntropy:e.mutation({query:e=>({url:"".concat(i,"/identity/password/validate"),method:"POST",body:e})}),confirmEmail:e.mutation({query:e=>({url:"".concat(i,"/identity/users/email/confirm_code"),method:"POST",body:e})}),confirmPasswordReset:e.mutation({query:e=>({url:"".concat(i,"/identity/users/password/confirm_code"),method:"POST",body:e})}),forgotPassword:e.mutation({query:e=>({url:"".concat(i,"/identity/users/password/generate_code"),method:"POST",body:e})}),resendConfirmation:e.mutation({query:e=>({url:"".concat(i,"/identity/users/email/generate_code"),method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"".concat(i,"/identity/sessions"),method:"DELETE"}),transformResponse:e=>(localStorage.removeItem("csrfToken"),e)}),signIn:e.mutation({query:e=>({url:"".concat(i,"/identity/sessions"),method:"POST",body:e}),transformResponse:e=>((null==e?void 0:e.csrf_token)&&localStorage.setItem("csrfToken",e.csrf_token),e)}),signUp:e.mutation({query:e=>({url:"".concat(i,"/identity/users"),method:"POST",body:e})}),enable2fa:e.mutation({query:e=>({url:"".concat(i,"/resource/otp/").concat(e.enable?"enable":"disable"),method:"POST",body:{code:e.code}})}),generate2faQR:e.mutation({query:()=>({url:"".concat(i,"/resource/otp/generate_qrcode"),method:"POST"}),transformResponse:e=>({barcode:e.data.barcode,url:e.data.url})})})}),{logout:d,logoutError:u,require2FAReset:l,signInError:p,signInRequire2FA:y,signUpError:f,signUpRequireVerification:m,verificationFetch:h,verificationSuccess:v}=s.actions,{useChangePasswordMutation:b,useCheckEntropyMutation:g,useConfirmEmailMutation:_,useConfirmPasswordResetMutation:k,useForgotPasswordMutation:S,useLogoutMutation:w,useResendConfirmationMutation:P,useSignInMutation:q,useSignUpMutation:x,useEnable2faMutation:O,useGenerate2faQRMutation:I}=c;t.ZP=s.reducer},82080:function(e,t,r){r.d(t,{eZ:function(){return d},xo:function(){return c}});var a=r(92010),n=r(24441),i=r(52844);let o=(0,n.oM)({name:"config",initialState:{loading:!1,success:!1,data:{captcha_type:"none",password_min_entropy:0}},reducers:{configsFetch:e=>{e.loading=!0,e.success=!1},configsData:(e,t)=>{e.loading=!1,e.success=!0,e.data=t.payload},configsError:(e,t)=>{e.loading=!1,e.success=!1,e.error=t.payload}},extraReducers:e=>{e.addMatcher(s.endpoints.configs.matchFulfilled,(e,t)=>{let{payload:r}=t;e.data=r,e.loading=!1,e.success=!0})}}),s=i.g.injectEndpoints({endpoints:e=>({configs:e.query({query:()=>({url:"".concat((0,a.Iy)(),"/identity/configs")})})})}),{useConfigsQuery:c,useLazyConfigsQuery:d}=s,{configsFetch:u,configsData:l,configsError:p}=o.actions;t.ZP=o.reducer},95977:function(e,t,r){r.d(t,{IM:function(){return p},P6:function(){return d},_2:function(){return y},qQ:function(){return l},t_:function(){return u},wB:function(){return c}});var a=r(92010),n=r(24441),i=r(52844);let o={id:"0",currency:"",name:"",state:"active",data:{address:"",chain:""}},s=(0,n.oM)({name:"beneficiaries",initialState:{activate:{data:o},create:{data:o},fetch:{data:[]},delete:{data:{id:0}},resendPin:{data:{id:0}},isActivationModalOpen:!1},reducers:{setCurrentBeneficiary:(e,t)=>{e.currentBeneficiary=t.payload},setActivationModalOpen:(e,t)=>{e.isActivationModalOpen=t.payload},beneficiariesData:(e,t)=>{e.fetch.data=t.payload},beneficiariesUpdate:(e,t)=>{let r=e.fetch.data.findIndex(e=>t.payload&&t.payload.id===e.id);r>-1?e.fetch.data[r]=t.payload:e.fetch.data.push(t.payload)},beneficiariesActivate:(e,t)=>{e.activate.data=t.payload},beneficiariesCreate:(e,t)=>{e.create.data=t.payload},beneficiariesDelete:(e,t)=>{e.delete.data=t.payload},beneficiariesResendPin:(e,t)=>{e.resendPin.data=t.payload}}}),{useLazyBeneficiariesQuery:c,useBeneficiaryCreateCryptoMutation:d,useBeneficiaryCreateFiatMutation:u,useBeneficiariesActivateMutation:l,useBeneficiariesResendPinMutation:p,useBeneficiariesDeleteMutation:y}=i.g.injectEndpoints({endpoints:e=>({beneficiaries:e.query({query:e=>({url:"".concat((0,a.nu)(),"/account/beneficiaries"),params:e})}),beneficiaryCreateCrypto:e.mutation({query:e=>({url:"".concat((0,a.nu)(),"/account/beneficiaries"),method:"POST",body:e})}),beneficiaryCreateFiat:e.mutation({query:e=>({url:"".concat((0,a.nu)(),"/account/beneficiaries/fiat"),method:"POST",body:e})}),beneficiariesActivate:e.mutation({query:e=>({url:"".concat((0,a.nu)(),"/account/beneficiaries/").concat(e.id,"/activate"),method:"PATCH",body:e})}),beneficiariesResendPin:e.mutation({query:e=>({url:"".concat((0,a.nu)(),"/account/beneficiaries/").concat(e.id,"/resend_pin"),method:"POST",body:e})}),beneficiariesDelete:e.mutation({query:e=>({url:"".concat((0,a.nu)(),"/account/beneficiaries/").concat(e.id),method:"DELETE",body:e})})})}),{beneficiariesData:f,beneficiariesUpdate:m,beneficiariesActivate:h,beneficiariesCreate:v,beneficiariesDelete:b,beneficiariesResendPin:g,setCurrentBeneficiary:_,setActivationModalOpen:k}=s.actions;t.ZP=s.reducer},54998:function(e,t,r){r.d(t,{EC:function(){return E},EX:function(){return g},LJ:function(){return u},Ml:function(){return m},NO:function(){return _},Pb:function(){return k},QZ:function(){return b},Qn:function(){return h},Sx:function(){return I},TL:function(){return f},Uu:function(){return A},_c:function(){return O},_g:function(){return x},aI:function(){return T},ed:function(){return w},kU:function(){return y},lG:function(){return P},le:function(){return v},oK:function(){return q},sZ:function(){return S}});var a=r(92010),n=r(24441),i=r(28546),o=r(52844);let s=(0,n.oM)({name:"kyc",initialState:{address:{currentStep:0,applicationData:{fileScan:[],address:"",city:"",country:"",postcode:""}},documents:{currentStep:0,applicationData:{documentsType:"",idNumber:"",issuedDate:"",expireDate:"",fileFront:[],fileBack:[],fileSelfie:[]}},identity:{send:{},edit:{}},investor:{currentStep:0,applicationData:{fileInsurance:[],fileRevenue:[],fileDividend:[],fileIncomeOthers:[],fileBankStatement:[],fileSecurities:[],fileRealEstate:[],fileProperty:[],fileAssetsOthers:[],experience_id:void 0,agreeDocs:!1,agreeFunds:!1,agreeRisks:!1,state:""}},labels:[],phone:{codeSend:!1}},reducers:{editIdentityData:(e,t)=>{e.success=t.payload.message,e.error=void 0},sendIdentityData:(e,t)=>{e.success=t.payload.message,e.error=void 0},setInvestorApplication:(e,t)=>{e.investor.applicationData=t.payload},setInvestorApplicationCurrentStep:(e,t)=>{e.investor.currentStep=t.payload},setAddressApplication:(e,t)=>{e.address.applicationData=t.payload},setAddressApplicationCurrentStep:(e,t)=>{e.address.currentStep=t.payload},setDocumentsApplication:(e,t)=>{e.documents.applicationData=t.payload},setDocumentsApplicationCurrentStep:(e,t)=>{e.documents.currentStep=t.payload},setLabels:(e,t)=>{e.labels=t.payload}},extraReducers:e=>{e.addMatcher(c.endpoints.labels.matchFulfilled,(e,t)=>{let{payload:r}=t;e.labels=r}).addMatcher(c.endpoints.investorApplication.matchFulfilled,(e,t)=>{let{payload:r}=t;if(r){var a;r.state&&(e.investor.applicationData.state=r.state),(null===(a=r.files)||void 0===a?void 0:a.length)&&r.files.map(t=>{switch(t.file_type){case"Social Insurance":e.investor.applicationData.fileInsurance=[t],e.investor.currentStep=i.RU.indexOf("income");break;case"Business Revenue":e.investor.applicationData.fileRevenue=[t],e.investor.currentStep=i.RU.indexOf("income");break;case"Dividend Income":e.investor.applicationData.fileDividend=[t],e.investor.currentStep=i.RU.indexOf("income");break;case"Others Income":e.investor.applicationData.fileIncomeOthers=[t],e.investor.currentStep=i.RU.indexOf("income");break;case"Bank Account Statement":e.investor.applicationData.fileBankStatement=[t],e.investor.currentStep=i.RU.indexOf("assets");break;case"Securities":e.investor.applicationData.fileSecurities=[t],e.investor.currentStep=i.RU.indexOf("assets");break;case"Real Estate":e.investor.applicationData.fileRealEstate=[t],e.investor.currentStep=i.RU.indexOf("assets");break;case"Moveable Property":e.investor.applicationData.fileProperty=[t],e.investor.currentStep=i.RU.indexOf("assets");break;case"Others Assets":e.investor.applicationData.fileAssetsOthers=[t],e.investor.currentStep=i.RU.indexOf("assets");break;default:return""}}),r.experience_id&&(e.investor.applicationData.experience_id=parseInt(r.experience_id),e.investor.currentStep=i.RU.indexOf("experience"))}})}}),c=o.g.injectEndpoints({endpoints:e=>({labels:e.query({query:()=>({url:"".concat((0,a.Iy)(),"/resource/labels")})}),sendCode:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/phones"),method:"POST",body:e})}),resendCode:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/phones/send_code"),method:"POST",body:e})}),verifyPhone:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/phones/verify"),method:"POST",body:e})}),sendIdentity:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/profiles"),method:"POST",body:e})}),editIdentity:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/profiles"),method:"PUT",body:e})}),sendDocuments:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/documents"),method:"POST",body:e})}),sendAddresses:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/addresses"),method:"POST",body:e})}),investorApplication:e.query({query:()=>({url:"".concat((0,a.Iy)(),"/resource/investor_application"),method:"GET"})}),sendInvestor:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/investor_application"),method:"POST",body:e})}),updateInvestor:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/investor_application"),method:"PATCH",body:e})}),submitInvestor:e.mutation({query:e=>({url:"".concat((0,a.Iy)(),"/resource/investor_application/submit"),method:"POST",body:e})})})}),{useInvestorApplicationQuery:d,useLazyInvestorApplicationQuery:u,useEditIdentityMutation:l,useLabelsQuery:p,useLazyLabelsQuery:y,useResendCodeMutation:f,useSendAddressesMutation:m,useSendCodeMutation:h,useSendDocumentsMutation:v,useSendIdentityMutation:b,useVerifyPhoneMutation:g,useSendInvestorMutation:_,useUpdateInvestorMutation:k,useSubmitInvestorMutation:S}=c,{editIdentityData:w,setInvestorApplication:P,setInvestorApplicationCurrentStep:q,setAddressApplication:x,setAddressApplicationCurrentStep:O,setDocumentsApplication:I,setDocumentsApplicationCurrentStep:T,sendIdentityData:E,setLabels:A}=s.actions;t.ZP=s.reducer},56363:function(e,t,r){r.d(t,{DY:function(){return u},Hc:function(){return f},J3:function(){return m},N7:function(){return y},cH:function(){return h},rk:function(){return p}});var a=r(92010),n=r(24441),i=r(52844),o=r(71897),s=r(16917);let c=(0,n.oM)({name:"openOrders",initialState:{list:[],total:0,tradelist:[],tradeListTotal:0,fetching:!1,pageIndex:0,cancelAllFetching:!1,cancelAllError:!1,cancelError:!1,cancelFetching:!1,nextPageExists:!1},reducers:{userOrdersHistoryRangerData:(e,t)=>{e.cancelFetching=!1,e.list=(0,s.Oc)(e.list,t.payload)}},extraReducers:e=>{e.addMatcher((0,n.Q)(d.endpoints.userOrdersHistoryArtemis.matchFulfilled,d.endpoints.userOrdersHistoryGaia.matchFulfilled,d.endpoints.userOrdersHistoryHestia.matchFulfilled),(e,t)=>{let{payload:r}=t;e.list=r.list,e.total=r.total}).addMatcher((0,n.Q)(d.endpoints.userTradesHistoryHestia.matchFulfilled,d.endpoints.userTradesHistoryArtemis.matchFulfilled),(e,t)=>{let{payload:r}=t;e.tradelist=r.list,e.tradeListTotal=r.total})}}),d=i.g.injectEndpoints({endpoints:e=>({userOrdersHistoryArtemis:e.query({async queryFn(e,t,r,n){let i=await n({url:"".concat((0,a.Yz)(),"/trade/order-history"),method:"GET",params:e}),s=i.data;return(null==s?void 0:s.data)?{data:{list:s.data.map(e=>(0,o.O6)(e)),total:s.totalCount}}:{error:i.error}}}),userOrdersHistoryGaia:e.query({async queryFn(e,t,r,n){var i,s;let c=await n({url:"".concat((0,a.Hg)(),"/market/orders"),method:"GET",params:e}),d=c.data;return c.data?{data:{list:d.map(e=>(0,o.sF)(e)),total:Number(null==c?void 0:null===(s=c.meta)||void 0===s?void 0:null===(i=s.response)||void 0===i?void 0:i.headers.get("Total"))}}:{error:c.error}}}),userOrdersHistoryHestia:e.query({async queryFn(e,t,r,n){var i,s;let c=await n({url:"".concat((0,a.LX)(),"/market/orders-history"),method:"GET",params:e}),d=c.data;return c.data?{data:{list:d.map(e=>(0,o.jz)(e)),total:Number(null==c?void 0:null===(s=c.meta)||void 0===s?void 0:null===(i=s.response)||void 0===i?void 0:i.headers.get("X-Total-Count"))}}:{error:c.error}}}),userTradesHistoryHestia:e.query({async queryFn(e,t,r,n){var i,s;let c=await n({url:"".concat((0,a.LX)(),"/account/trades"),method:"GET",params:e}),d=c.data;return c.data?{data:{list:d.map(e=>(0,o.VP)(e)),total:Number(null==c?void 0:null===(s=c.meta)||void 0===s?void 0:null===(i=s.response)||void 0===i?void 0:i.headers.get("X-Total-Count"))}}:{error:c.error}}}),userTradesHistoryArtemis:e.query({async queryFn(e,t,r,n){var i,s;let c=await n({url:"".concat((0,a.Yz)(),"/trade/executions"),method:"GET",params:e}),d=c.data;return d?{data:{list:d.data.map(e=>(0,o.gr)(e)),total:d.totalCount||Number(null==c?void 0:null===(s=c.meta)||void 0===s?void 0:null===(i=s.response)||void 0===i?void 0:i.headers.get("X-Total-Count"))}}:{error:c.error}}})})}),{useLazyUserOrdersHistoryArtemisQuery:u,useUserOrdersHistoryGaiaQuery:l,useLazyUserOrdersHistoryGaiaQuery:p,useLazyUserOrdersHistoryHestiaQuery:y,useLazyUserTradesHistoryHestiaQuery:f,useLazyUserTradesHistoryArtemisQuery:m}=d,{userOrdersHistoryRangerData:h}=c.actions;t.ZP=c.reducer},12103:function(e,t,r){r.d(t,{AP:function(){return n},Ml:function(){return o},Ye:function(){return c},qy:function(){return s}});var a=r(24441);let n=e=>{let t=null==e?void 0:e.map(t=>{switch(typeof t){case"number":return t;case"string":return Number.parseFloat(t);default:throw Error("unexpected type ".concat(typeof t," in kline: ").concat(e))}});if(!t)throw Error("kline event map error");let[r,a,n,i,o,s]=t;return{time:1e3*r,open:a,high:n,low:i,close:o,volume:s}},i=(0,a.oM)({name:"kline",initialState:{last:void 0,marketId:void 0,period:void 0,loading:!1,data:[],range:{from:0,to:0}},reducers:{klineUpdatePeriod:(e,t)=>{e.period=t.payload},klineUpdateTimeRange:(e,t)=>{e.range=t.payload},klinePush:(e,t)=>{e.marketId=t.payload.marketId,e.period=t.payload.period,e.last=n(t.payload.kline)}}}),{klineUpdatePeriod:o,klineUpdateTimeRange:s,klinePush:c}=i.actions;t.ZP=i.reducer},22061:function(e,t,r){r.d(t,{h:function(){return V}});var a=r(24441),n=r(33883),i=r(47609),o=r(82080),s=r(15725),c=r(78422),d=r(57111);let u=(0,n.UY)({alerts:i.ZP,configs:o.ZP,global:s.ZP,i18n:c.ZP,ranger:d.ZP});var l=r(21823),p=r(96282),y=r(95977),f=r(92010),m=r(86579),h=r(52844);let v=(0,a.oM)({name:"depth",initialState:{asks:[],bids:[],loading:!1,error:void 0},reducers:{depthFetch:e=>{e.loading=!0,e.error=void 0,e.timestamp=Math.floor(Date.now()/1e3)},depthData:(e,t)=>{let{asks:r,bids:a}=t.payload;e.asks=(0,m.W)(r,(0,f.zh)()),e.bids=(0,m.W)(a,(0,f.zh)()),e.loading=!1,e.error=void 0},depthError:(e,t)=>{e.loading=!1,e.error=t.payload}}}),{useDepthArtemisQuery:b}=h.g.injectEndpoints({endpoints:e=>({depthArtemis:e.query({query:e=>({url:"".concat((0,f.Yz)(),"/public/market/depth"),method:"GET",params:{instId:e.marketId,limit:30}})})})}),{depthData:g}=v.actions;var _=v.reducer,k=r(46424),S=r(54998),w=r(21014);let P=(0,a.oM)({name:"orderBook",initialState:{asks:[],bids:[],loading:!1,error:void 0},reducers:{orderBookFetch:e=>{e.loading=!0,e.error=void 0},orderBookData:(e,t)=>{let{asks:r,bids:a}=t.payload;e.asks=(0,m.W)(r,(0,f.zh)()),e.bids=(0,m.W)(a,(0,f.zh)()),e.loading=!1,e.error=void 0},orderBookError:(e,t)=>{e.loading=!1,e.error=t.payload}}}),{useOrderBookArtemisQuery:q}=h.g.injectEndpoints({endpoints:e=>({orderBookArtemis:e.query({query:e=>({url:"".concat((0,f.Yz)(),"/public/market/order-book"),method:"GET",params:{instId:e.marketId,limit:30}})})})}),{orderBookFetch:x,orderBookData:O,orderBookError:I}=P.actions;var T=P.reducer,E=r(56363),A=r(12103),D=r(7605),F=r(83761),R=r(87989),C=r(75629),Z=r(83154),U=r(52820);let H=(0,n.UY)({account:F.ZP,assets:p.ZP,auth:l.ZP,beneficiaries:y.ZP,depth:_,depthIncrement:k.ZP,kline:A.ZP,kyc:S.ZP,launchpad:D.ZP,markets:R.ZP,openOrders:w.ZP,order:C.ZP,ordersHistory:E.ZP,orderBook:T,recentTrades:Z.ZP,wallets:U.ZP});var M=r(82571),N=r(86446),z=r(56136),B=r(92050),X=r(71897),j=r(31597);let G=e=>{let t;let r=(t,r)=>{let a=(0,N.XF)(null==t?void 0:t.instId),n=["".concat(a,".ob-inc"),"".concat(a,".ob-snap")];e.dispatch((0,d.Xp)({event:"unsubscribe",streams:n})),n.every(e=>r.includes(e))||e.dispatch((0,d.on)({event:"subscribe",streams:n}))},a=(t,r)=>{e.dispatch((0,i.J_)({type:"success",title:"alert.type.info",message:{id:t,values:r}}))};return n=>o=>{let s=e.getState().public.ranger.connected;if("ranger/rangerConnectFetch"===o.type&&!s){var c,u,l,p,y,m,v,b,_,S;let n={messages:[]},s=o.payload.withAuth,P=null===(l=e.getState())||void 0===l?void 0:null===(u=l.public)||void 0===u?void 0:null===(c=u.ranger)||void 0===c?void 0:c.subscriptions,q=null===(m=e.getState())||void 0===m?void 0:null===(y=m.user)||void 0===y?void 0:null===(p=y.markets)||void 0===p?void 0:p.currentMarket,x=null===(S=e.getState())||void 0===S?void 0:null===(_=S.user)||void 0===_?void 0:null===(b=_.account)||void 0===b?void 0:null===(v=b.userData)||void 0===v?void 0:v.user,O="".concat((0,f.ez)(),"/").concat(s?"private":"public"),I=(0,z.Cd)(s,P,q,x,e);(t=new WebSocket((0,z.XI)(O,I))).onopen=()=>{for(e.dispatch((0,d.Eg)());n.messages.length>0;){let e=n.messages.shift();t.send(JSON.stringify(e))}},t.onclose=()=>{e.dispatch((0,d.Mj)()),e.dispatch((0,d.A8)({withAuth:s}))},t.onmessage=t=>{let{data:n}=t,o={};try{o=JSON.parse(n)}catch(e){window.console.error("Error parsing : ".concat(e))}for(let t in o)if(Object.prototype.hasOwnProperty.call(o,t)){var s,c,u,l,p;let n=o[t],y=(0,j.B9)(e.getState()),f=t.match(/([^.]*)\.update/),m=t.match(/([^.]*)\.ob-snap/),v=t.match(/([^.]*)\.ob-inc/);if(f){y&&f[1]===(0,N.XF)(y.instId)&&e.dispatch(g(n));return}if(m){let t=m[1];y&&t===(0,N.XF)(y.instId)&&e.dispatch((0,k.xZ)(n));return}if(v){let t=v[1];if(y&&t===(0,N.XF)(y.instId)){let t=(0,B.gv)(e.getState());if(null!==t&&t>n.sequence){window.console.log("Bad sequence detected in incremental orderbook previous: ".concat(t,", event: ").concat(n.sequence)),e.dispatch((0,k.HY)()),y&&r(y,P);return}e.dispatch((0,k.zC)(n))}return}let b=String(t).match(/([^.]*)\.trades/);if(b){e.dispatch((0,Z.gh)({trades:n.trades,market:b[1]}));return}let _=String(t).match(/([^.]*)\.kline-(.+)/);if(_){e.dispatch((0,A.Ye)({marketId:_[1],kline:n,period:_[2]}));return}let S=h.g.endpoints;switch(t){case"global.tickers":e.dispatch((0,R.oR)(n));return;case"public.nyx_securities":e.dispatch((0,D.C7)(n));return;case"success":switch(n.message){case"subscribed":case"unsubscribed":e.dispatch((0,d.yp)({subscriptions:n.streams}))}return;case"order":n.order&&(e.dispatch((0,w.DU)((0,X.mN)(n.order))),e.dispatch((0,E.cH)((0,X.mN)(n.order)))),e.dispatch(null==S?void 0:null===(s=S.walletsGaia)||void 0===s?void 0:s.initiate(void 0));return;case"artemis_balances":n&&e.dispatch((0,U.Cc)({balanceData:n}));break;case"artemis_deposit":case"artemis_withdraw":case"artemis_internal_transfer_receive":case"artemis_crypto_deposit":case"artemis_crypto_withdraw":case"conversion":e.dispatch(null==S?void 0:null===(c=S.walletsArtemis)||void 0===c?void 0:c.initiate());break;case"artemis_order":if(n.order){let t=(0,X.K4)(n.order);e.dispatch((0,w.DU)(t)),"rejected"===t.state&&e.dispatch((0,i.J_)({type:"warning",title:"trade.order.rejected.title",message:""})),e.dispatch((0,E.cH)((0,X.K4)(n.order))),e.dispatch(null==S?void 0:null===(u=S.walletsArtemis)||void 0===u?void 0:u.initiate())}return;case"nyx_order":n.order&&e.dispatch((0,D.Z9)(n.order)),n.account&&e.dispatch((0,U.bf)({event:n.account,exchange:"nyx"}));return;case"hestia_order":n.order&&(e.dispatch((0,w.DU)((0,X.tH)(n.order))),e.dispatch((0,E.cH)((0,X.tH)(n.order)))),(null==n?void 0:n.balances)&&((null==n?void 0:null===(l=n.balances)||void 0===l?void 0:l.cashAccount)&&e.dispatch((0,U.bf)({event:n.balances.cashAccount,exchange:"hestia"})),(null==n?void 0:null===(p=n.balances)||void 0===p?void 0:p.securityAccount)&&e.dispatch((0,U.bf)({event:n.balances.securityAccount,exchange:"hestia"})));return;case"deposit_address":e.dispatch((0,U.Ic)(n));return;case"artemis_deposit_address":e.dispatch((0,U.dg)(n));return;case"hestia_deposit":case"hestia_withdraw":case"nyx_withdraw":case"nyx_deposit":try{let r=J(t);if(!r.type||!r.exchange)return;let i=r.exchange,o=n[r.type];if(!["collected","succeed","success"].includes(o.state)||!n.account)return;e.dispatch((0,U.bf)({event:n.account,exchange:i})),a("success.".concat(r.type,".received"),{currency:o.currency,quantity:(0,M.format)(o.amount,Number(2),",")})}catch(e){throw Error("wallet_tx_ws.update.failed")}break;case"nyx_internal_transfer_receive":case"hestia_internal_transfer_receive":try{let r="internalTransfer",i={nyx_internal_transfer_receive:"nyx",hestia_internal_transfer_receive:"hestia",artemis_internal_transfer_receive:"artemis"}[t],o=n[r];if(!["success"].includes(o.state)||!n.account)return;e.dispatch((0,U.bf)({event:n.account,exchange:i})),a("success.".concat(r,".received"),{currency:o.toCurrency,quantity:(0,M.format)(o.transferAmount,Number(2),",")})}catch(e){throw Error("wallet_tx_ws.update.failed")}break;case"peatio_withdraw":case"peatio_deposit":try{let r=J(t);if(!r.type||!r.exchange)return;let i=r.exchange,o=n[r.type];if(!["accepted"].includes(o.state)||!n.account)return;let s={userId:"",currency:n.account.currency_id,balance:n.account.balance,locked:n.account.locked};e.dispatch((0,U.bf)({event:s,exchange:i})),a("success.".concat(r.type,".received"),{currency:o.currency,quantity:(0,M.format)(o.amount,Number(2),",")})}catch(e){throw Error("wallet_tx_ws.update.failed")}break;case"peatio_user_internal_transfer":try{let t="internalTransfer",r=n[t];if(!["success"].includes(r.state)||!n.account)return;let i={userId:"",currency:n.account.currency_id,balance:n.account.balance,locked:n.account.locked};e.dispatch((0,U.bf)({event:i,exchange:"gaia"})),a("success.".concat(t,".received"),{currency:r.to_currency,quantity:(0,M.format)(r.transfer_amount,Number(2),",")})}catch(e){throw Error("wallet_tx_ws.update.failed")}}}},t.onerror=e=>{}}if("ranger/rangerSubscribe"===o.type&&s){let e={event:"subscribe",streams:o.payload.streams};t.send(JSON.stringify(e))}if("ranger/rangerUnsubscribe"===o.type&&s){let e={event:"unsubscribe",streams:o.payload.streams};t.send(JSON.stringify(e))}n(o)}},J=e=>{switch(e){case"hestia_deposit":return{type:"deposit",exchange:"hestia"};case"hestia_withdraw":return{type:"withdraw",exchange:"hestia"};case"nyx_withdraw":return{type:"withdraw",exchange:"nyx"};case"nyx_deposit":return{type:"deposit",exchange:"nyx"};case"peatio_withdraw":return{type:"withdraw",exchange:"gaia"};case"peatio_deposit":return{type:"deposit",exchange:"gaia"};default:return{type:null,exchange:null}}},Y=e=>t=>r=>{if((0,a.h_)(r)&&r.error){var n,o,s,c,d,u;let t=(null===(n=r.payload)||void 0===n?void 0:n.data)&&(null===(o=r.payload.data.errors)||void 0===o?void 0:o.length)&&Array.isArray(r.payload.data.errors),a=t&&"object"==typeof r.payload.data.errors[0]&&null!==r.payload.data.errors[0],l=t&&["authz.invalid_session","identity.session.missing_otp","identity.session.not_found","subaccount.subaccount_not_found","subaccount.account_not_found","user.ability.not_permitted","resource.phone.exists"].includes(r.payload.data.errors[0]),p="authz.invalid_session"===r.payload.data&&401===r.payload.originalStatus,y=(null===(s=r.payload)||void 0===s?void 0:s.data)&&r.payload.data.msg;y?e.dispatch((0,i.J_)({type:"error",title:"alert.error",message:y})):a?e.dispatch((0,i.J_)({type:"error",title:"alert.error",message:"form.field.invalid_value"})):l||null===(u=r.payload)||void 0===u||null===(d=u.data)||void 0===d||null===(c=d.errors)||void 0===c||c.map(t=>{e.dispatch((0,i.J_)({type:"error",title:"alert.type.error",message:t}))}),p&&(e.dispatch((0,F.zb)()),localStorage.removeItem("csrfToken"))}return t(r)},L=(0,n.UY)({[h.g.reducerPath]:h.g.reducer,public:u,user:H}),V=(0,a.xC)({reducer:L,devTools:!1,middleware:e=>e({serializableCheck:!1}).concat(h.g.middleware).concat(G).concat(Y)})}}]);