(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94588],{10595:function(e,r,t){Promise.resolve().then(t.bind(t,61472))},21823:function(e,r,t){"use strict";t.d(r,{$h:function(){return y},Jx:function(){return v},OE:function(){return P},X0:function(){return w},_y:function(){return _},bq:function(){return E},gC:function(){return q},iX:function(){return p},kN:function(){return N},tl:function(){return j},uf:function(){return S},zN:function(){return b},zP:function(){return h}});var o=t(24441),i=t(52844);let a="auth",s={current_password_entropy:0,emailVerified:!1,require2FA:!1,requireVerification:!1},n=(0,o.oM)({name:"auth",initialState:s,reducers:{logout:()=>s,logoutError:(e,r)=>{e.logoutError=r.payload},require2FAReset:e=>{e.require2FA=!1},signInError:(e,r)=>{e.authError=r.payload},signInRequire2FA:(e,r)=>{e.require2FA=r.payload.require2fa},signUpError:(e,r)=>{e.signUpError=r.payload},signUpRequireVerification:(e,r)=>{e.requireVerification=r.payload.requireVerification},verificationFetch:e=>{e.emailVerified=!1},verificationSuccess:e=>{e.emailVerified=!0}},extraReducers:e=>{e.addMatcher(d.endpoints.checkEntropy.matchFulfilled,(e,r)=>{let{payload:t}=r;e.current_password_entropy=parseFloat(t.entropy)})}}),d=i.g.injectEndpoints({endpoints:e=>({changePassword:e.mutation({query:e=>({url:"".concat(a,"/resource/users/password"),method:"PUT",body:e})}),checkEntropy:e.mutation({query:e=>({url:"".concat(a,"/identity/password/validate"),method:"POST",body:e})}),confirmEmail:e.mutation({query:e=>({url:"".concat(a,"/identity/users/email/confirm_code"),method:"POST",body:e})}),confirmPasswordReset:e.mutation({query:e=>({url:"".concat(a,"/identity/users/password/confirm_code"),method:"POST",body:e})}),forgotPassword:e.mutation({query:e=>({url:"".concat(a,"/identity/users/password/generate_code"),method:"POST",body:e})}),resendConfirmation:e.mutation({query:e=>({url:"".concat(a,"/identity/users/email/generate_code"),method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"".concat(a,"/identity/sessions"),method:"DELETE"}),transformResponse:e=>(localStorage.removeItem("csrfToken"),e)}),signIn:e.mutation({query:e=>({url:"".concat(a,"/identity/sessions"),method:"POST",body:e}),transformResponse:e=>((null==e?void 0:e.csrf_token)&&localStorage.setItem("csrfToken",e.csrf_token),e)}),signUp:e.mutation({query:e=>({url:"".concat(a,"/identity/users"),method:"POST",body:e})}),enable2fa:e.mutation({query:e=>({url:"".concat(a,"/resource/otp/").concat(e.enable?"enable":"disable"),method:"POST",body:{code:e.code}})}),generate2faQR:e.mutation({query:()=>({url:"".concat(a,"/resource/otp/generate_qrcode"),method:"POST"}),transformResponse:e=>({barcode:e.data.barcode,url:e.data.url})})})}),{logout:c,logoutError:l,require2FAReset:u,signInError:m,signInRequire2FA:p,signUpError:f,signUpRequireVerification:h,verificationFetch:g,verificationSuccess:x}=n.actions,{useChangePasswordMutation:y,useCheckEntropyMutation:w,useConfirmEmailMutation:v,useConfirmPasswordResetMutation:j,useForgotPasswordMutation:b,useLogoutMutation:_,useResendConfirmationMutation:q,useSignInMutation:S,useSignUpMutation:P,useEnable2faMutation:E,useGenerate2faQRMutation:N}=d;r.ZP=n.reducer},61472:function(e,r,t){"use strict";var o=t(30098),i=t(76727),a=t(83334),s=t(25586),n=t(87229),d=t(48831),c=t(8092),l=t(97824),u=t(56063),m=t(92010),p=t(82571),f=t(86446),h=t(77857),g=t(21457),x=t(75584),y=t(22103),w=t(83834),v=t(64678),j=t(43435),b=t(75062),_=t(81918),q=t(2467),S=t(3614),P=t(26025),E=t(87975),N=t(21823);r.default=()=>{let{handleSubmit:e,register:r,reset:t,watch:T,getValues:k,setValue:C,clearErrors:I,formState:{errors:O}}=(0,v.cI)({mode:"onChange"}),{executeRecaptcha:Z}=(0,w.xX)(),F=(0,x.useRouter)(),{formatMessage:z}=(0,j.Z)(),A=(0,q.TL)(),[R]=(0,N.X0)(),[U,{isLoading:V}]=(0,N.OE)(),X=(0,q.CG)(S.x),D=(0,q.CG)(P.A),J=(0,q.CG)(E.ZH),G=T("email"),L=T("agreed"),M=T("confirmPassword"),[B,H]=(0,y.useState)(""),[Q,$]=(0,y.useState)(!1),[K,W]=(0,y.useState)(!1),[Y,ee]=(0,y.useState)(0),[er,et]=(0,y.useState)(!1),[eo,ei]=(0,y.useState)(!1),[ea,es]=(0,y.useState)(!1);(0,y.useEffect)(()=>{t()},[t]);let en=e=>{H(e),0===e.length&&(C("confirmPassword",""),I("confirmPassword")),(0,f.fA)(e)&&!er?et(!0):!(0,f.fA)(e)&&er&&et(!1),(0,f.ct)(e)&&!eo?ei(!0):!(0,f.ct)(e)&&eo&&ei(!1),(0,f.Tj)(e)&&!ea?es(!0):!(0,f.Tj)(e)&&ea&&es(!1),Y&&clearTimeout(Y),ee(window.setTimeout(()=>{R({password:e})},500))},ed=async e=>{let{email:r,password:t}=e,o={data:'{"language":"en"}',email:r.trim(),password:t};if("none"!==X.captcha_type&&(0,m.ax)()){if(!Z)return;let e=await Z("user_create");o.captcha_response=e}let i=await U(o).unwrap();(null==i?void 0:i.email)&&(A((0,N.zP)({requireVerification:!0})),F.push("email-verification?email=".concat(i.email)))};return(0,o.jsxs)("div",{className:"border-primary-500 flex w-full max-w-[460px] flex-col items-center rounded-xl p-6 pt-[50px] sm:border sm:p-10",children:[(0,o.jsx)(h.default,{className:"mb-5",src:"/logo-compact.svg",width:52,height:52,priority:!0,alt:"Denode compact logo"}),(0,o.jsx)("h1",{className:"text-center text-2xl font-medium",children:(0,o.jsx)(b.Z,{id:"page.body.signup.form.title"})}),(0,o.jsx)("form",{className:"mt-10",action:"submit",autoComplete:"off",onSubmit:e(ed),children:(0,o.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,o.jsxs)(i.NI,{isInvalid:!!O.email,children:[(0,o.jsx)(a.l,{color:"light.900",children:(0,o.jsx)(b.Z,{id:"page.body.signup.form.email.label"})}),(0,o.jsx)(s.I,{autoComplete:"off",variant:"outline",placeholder:z({id:"page.body.signup.form.email.placeholder"}),size:"md",autoFocus:!0,"aria-invalid":O.email?"true":"false",...r("email",{required:z({id:"form.field.required"}),validate:e=>{if(e)return f.CU.test(e.trim())||z({id:"form.field.invalid_value"})}})}),O.email&&(0,o.jsxs)(n.J1,{children:[(0,o.jsx)(_.aN,{mr:"10px"}),O.email.message]})]}),(0,o.jsxs)(i.NI,{isInvalid:!!O.password,children:[(0,o.jsx)(a.l,{color:"light.900",children:(0,o.jsx)(b.Z,{id:"page.body.signup.form.password.label"})}),(0,o.jsxs)(d.B,{children:[(0,o.jsx)(s.I,{autoComplete:"new-password",variant:"outline",placeholder:z({id:"page.body.signup.form.password.placeholder"}),size:"md",type:Q?"text":"password","aria-invalid":O.password?"true":"false",...r("password",{required:z({id:"form.field.required"}),pattern:{value:f.zU,message:z({id:"form.field.invalid_value"})},validate:e=>{let{confirmPassword:r}=k();return r===e||z({id:"form.field.password_unmatched"})}}),onChange:e=>en(e.currentTarget.value)}),(0,o.jsx)(c.x,{onClick:()=>$(!Q),children:Q?(0,o.jsx)(_.tp,{color:"dark.300",_hover:{color:"light.900"}}):(0,o.jsx)(_.ON,{color:"dark.300",_hover:{color:"light.900"}})})]}),B&&(0,o.jsx)(p.PasswordStrengthMeter,{minPasswordEntropy:X.password_min_entropy,currentPasswordEntropy:J,passwordExist:""!==B,passwordErrorFirstSolved:er,passwordErrorSecondSolved:eo,passwordErrorThirdSolved:ea}),O.password&&(0,o.jsxs)(n.J1,{children:[(0,o.jsx)(_.aN,{mr:"10px"}),O.password.message]}),B&&!(er&&eo&&ea)&&(0,o.jsx)(i.Q6,{children:(0,o.jsx)(p.PasswordStrengthTip,{passwordErrorFirstSolved:er,passwordErrorSecondSolved:eo,passwordErrorThirdSolved:ea})})]}),(0,o.jsxs)(i.NI,{isInvalid:!!O.confirmPassword,children:[(0,o.jsx)(a.l,{color:"light.900",children:(0,o.jsx)(b.Z,{id:"page.body.signup.form.confirm_password.label"})}),(0,o.jsxs)(d.B,{children:[(0,o.jsx)(s.I,{autoComplete:"new-password",variant:"outline",placeholder:z({id:"page.body.signup.form.confirm_password.placeholder"}),size:"md",type:K?"text":"password","aria-invalid":O.confirmPassword?"true":"false",isDisabled:!B,...r("confirmPassword",{required:!1,validate:e=>{let{password:r}=k();return r===e||z({id:"form.field.password_unmatched"})}})}),(0,o.jsx)(c.x,{onClick:()=>W(!K),children:K?(0,o.jsx)(_.tp,{color:"dark.300",_hover:{color:"light.900"}}):(0,o.jsx)(_.ON,{color:"dark.300",_hover:{color:"light.900"}})})]}),O.confirmPassword&&(0,o.jsxs)(n.J1,{children:[(0,o.jsx)(_.aN,{mr:"10px"}),O.confirmPassword.message]})]}),(0,o.jsx)(i.NI,{children:(0,o.jsx)(l.X,{size:"lg",colorScheme:"primary",spacing:2,required:!0,...r("agreed",{required:!0}),children:(0,o.jsx)("p",{className:"text-dark-300 text-base leading-5",children:(0,o.jsx)(b.Z,{id:"page.body.signup.form.agreement",values:{terms:(0,o.jsx)(g.default,{className:"active:text-primary-500 text-white hover:underline active:underline",href:"https://denode.io/".concat("en"===D?"":"".concat(D,"/"),"terms-of-service"),children:z({id:"page.footer.terms_use"})}),privacy:(0,o.jsx)(g.default,{className:"active:text-primar-500 text-white hover:underline active:underline",href:"https://denode.io/".concat("en"===D?"":"".concat(D,"/"),"privacy-policy"),children:z({id:"page.footer.privacy_policy"})})}})})})}),(0,o.jsx)(u.z,{variant:"solid",colorScheme:"primary",size:"lg",width:"100%",type:"submit",isDisabled:V||(()=>{let e=G&&f.CU.test(G.trim()),r=er&&eo&&ea&&B===M;return!(e&&r&&L)})(),isLoading:V,children:(0,o.jsx)(b.Z,{id:"page.body.signup.form.signup"})}),(0,o.jsxs)("p",{className:"text-dark-300 text-center leading-5",children:[(0,o.jsx)(b.Z,{id:"page.body.signup.form.have_account"})," ",(0,o.jsx)(g.default,{className:"focus:text-primary-500 text-white hover:underline focus:underline",href:"/".concat("en"===D?"":"".concat(D,"/"),"login"),children:(0,o.jsx)(b.Z,{id:"page.body.signup.form.log_in"})})]})]})})]})}},87975:function(e,r,t){"use strict";t.d(r,{Uw:function(){return i},ZH:function(){return o},kO:function(){return a}});let o=e=>e.user.auth.current_password_entropy,i=e=>e.user.auth.require2FA,a=e=>e.user.auth.requireVerification},3614:function(e,r,t){"use strict";t.d(r,{x:function(){return o}});let o=e=>e.public.configs.data},26025:function(e,r,t){"use strict";t.d(r,{A:function(){return o}});let o=e=>e.public.i18n.lang},75062:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var o=t(30098);t(22103);var i=t(35507);function a(e){return(0,o.jsx)(i.Z,{...e})}}},function(e){e.O(0,[97288,31967,40514,43429,92521,4085,36530,50463,18667,38088,75181,45009,72568,82571,52844,81918,57381,71739,39174,84909,1744],function(){return e(e.s=10595)}),_N_E=e.O()}]);