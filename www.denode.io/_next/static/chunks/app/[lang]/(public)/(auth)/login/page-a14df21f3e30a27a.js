(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6062],{70933:function(e,r,t){Promise.resolve().then(t.bind(t,53503))},21823:function(e,r,t){"use strict";t.d(r,{$h:function(){return y},Jx:function(){return b},OE:function(){return q},X0:function(){return j},_y:function(){return k},bq:function(){return C},gC:function(){return _},iX:function(){return f},kN:function(){return S},tl:function(){return v},uf:function(){return N},zN:function(){return w},zP:function(){return p}});var i=t(24441),n=t(52844);let s="auth",o={current_password_entropy:0,emailVerified:!1,require2FA:!1,requireVerification:!1},a=(0,i.oM)({name:"auth",initialState:o,reducers:{logout:()=>o,logoutError:(e,r)=>{e.logoutError=r.payload},require2FAReset:e=>{e.require2FA=!1},signInError:(e,r)=>{e.authError=r.payload},signInRequire2FA:(e,r)=>{e.require2FA=r.payload.require2fa},signUpError:(e,r)=>{e.signUpError=r.payload},signUpRequireVerification:(e,r)=>{e.requireVerification=r.payload.requireVerification},verificationFetch:e=>{e.emailVerified=!1},verificationSuccess:e=>{e.emailVerified=!0}},extraReducers:e=>{e.addMatcher(l.endpoints.checkEntropy.matchFulfilled,(e,r)=>{let{payload:t}=r;e.current_password_entropy=parseFloat(t.entropy)})}}),l=n.g.injectEndpoints({endpoints:e=>({changePassword:e.mutation({query:e=>({url:"".concat(s,"/resource/users/password"),method:"PUT",body:e})}),checkEntropy:e.mutation({query:e=>({url:"".concat(s,"/identity/password/validate"),method:"POST",body:e})}),confirmEmail:e.mutation({query:e=>({url:"".concat(s,"/identity/users/email/confirm_code"),method:"POST",body:e})}),confirmPasswordReset:e.mutation({query:e=>({url:"".concat(s,"/identity/users/password/confirm_code"),method:"POST",body:e})}),forgotPassword:e.mutation({query:e=>({url:"".concat(s,"/identity/users/password/generate_code"),method:"POST",body:e})}),resendConfirmation:e.mutation({query:e=>({url:"".concat(s,"/identity/users/email/generate_code"),method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"".concat(s,"/identity/sessions"),method:"DELETE"}),transformResponse:e=>(localStorage.removeItem("csrfToken"),e)}),signIn:e.mutation({query:e=>({url:"".concat(s,"/identity/sessions"),method:"POST",body:e}),transformResponse:e=>((null==e?void 0:e.csrf_token)&&localStorage.setItem("csrfToken",e.csrf_token),e)}),signUp:e.mutation({query:e=>({url:"".concat(s,"/identity/users"),method:"POST",body:e})}),enable2fa:e.mutation({query:e=>({url:"".concat(s,"/resource/otp/").concat(e.enable?"enable":"disable"),method:"POST",body:{code:e.code}})}),generate2faQR:e.mutation({query:()=>({url:"".concat(s,"/resource/otp/generate_qrcode"),method:"POST"}),transformResponse:e=>({barcode:e.data.barcode,url:e.data.url})})})}),{logout:c,logoutError:d,require2FAReset:u,signInError:m,signInRequire2FA:f,signUpError:x,signUpRequireVerification:p,verificationFetch:h,verificationSuccess:g}=a.actions,{useChangePasswordMutation:y,useCheckEntropyMutation:j,useConfirmEmailMutation:b,useConfirmPasswordResetMutation:v,useForgotPasswordMutation:w,useLogoutMutation:k,useResendConfirmationMutation:_,useSignInMutation:N,useSignUpMutation:q,useEnable2faMutation:C,useGenerate2faQRMutation:S}=l;r.ZP=a.reducer},53503:function(e,r,t){"use strict";t.d(r,{default:function(){return z}});var i=t(30098),n=t(76727),s=t(83334),o=t(25586),a=t(87229),l=t(48831),c=t(8092),d=t(56063),u=t(92010),m=t(86446),f=t(77857),x=t(21457),p=t(75584),h=t(22103),g=t(83834),y=t(64678),j=t(43435),b=t(75062),v=t(40609),w=t(81918),k=t(2467),_=t(65121),N=t(83761),q=t(3614),C=t(26025),S=t(78422),E=t(87975),Z=t(21823),O=t(90876),P=e=>{let{handle2FASignin:r,isLoading:t,autoComplete:n=!1}=e;return(0,i.jsxs)("div",{className:"border-dark-700 w-full px-6 pb-10 pt-[50px] sm:border sm:px-10",children:[(0,i.jsx)(f.default,{className:"mx-auto mb-5",src:"/logo-compact.svg",width:52,height:52,priority:!0,alt:"Denode compact logo"}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("p",{className:"text-center text-2xl font-medium",children:(0,i.jsx)(b.Z,{id:"page.body.2fa.form.title"})}),(0,i.jsx)("p",{className:"text-dark-300 text-center leading-5",children:(0,i.jsx)(b.Z,{id:"page.body.2fa.form.subtitle"})})]}),(0,i.jsx)("div",{className:"mt-10",children:(0,i.jsx)(O.Z,{autoComplete:n,disabledContinueButton:t,isLoadingContinue:t,shouldAutoFocus:!0,hasContinueButton:!0,onSubmit:e=>{r(e)}})})]})},z=()=>{let{register:e,handleSubmit:r,getValues:t,formState:{errors:O}}=(0,y.cI)({mode:"onChange",defaultValues:{email:"",password:""}}),z=(0,p.useRouter)(),{formatMessage:F}=(0,j.Z)(),I=(0,k.TL)(),T=(0,k.CG)(E.Uw),A=(0,k.CG)(q.x),R=(0,k.CG)(C.A),V=(0,k.CG)(_.Ws),U=(0,k.CG)(E.kO),{executeRecaptcha:D}=(0,g.xX)(),[L,B]=(0,h.useState)(!1),[G,J]=(0,h.useState)(!1),[X,{data:M,error:W,isError:H}]=(0,Z.uf)(),K=(0,j.Z)(),Q=(0,h.useCallback)(e=>K.formatMessage({id:e}),[K]);(0,h.useEffect)(()=>{let{email:e}=t();V&&z.push("/".concat("en"===R?"":"".concat(R,"/"),"dashboard")),U&&e&&z.push("/".concat("en"===R?"":"".concat(R,"/"),"email-verification?email=").concat(e))},[V,U,R,t,z,I]),(0,h.useEffect)(()=>{if(M)"pending"===M.state?I((0,Z.zP)({requireVerification:!0})):(M.data&&JSON.parse(M.data).language&&I((0,S.D0)(JSON.parse(M.data).language)),I((0,Z.iX)({require2fa:!1})),I((0,N.M)({user:M})));else if(H&&W&&"status"in W&&"data"in W){var e;401===W.status&&(null===(e=W.data)||void 0===e?void 0:e.errors.indexOf("identity.session.missing_otp"))>-1&&I((0,Z.iX)({require2fa:!0}))}},[M,W,H,F,I]);let $=async e=>{let{email:r,password:t,otp_code:i}=e;try{if(B(!0),"none"!==A.captcha_type&&(0,u.ax)()){if(!D)return;let e=await D("session_create");await X({email:r,password:t,otp_code:i,captcha_response:e})}else await X({email:r,password:t,otp_code:i})}finally{B(!1)}},Y=async e=>{let{email:r,password:t}=e;$({email:r,password:t})},ee=async e=>{let{email:r,password:i}=t();$({email:r,password:i,otp_code:e})};return(0,i.jsx)("div",{className:"border-dark-700 flex w-full max-w-[460px] flex-col items-center rounded-xl sm:border",children:T?(0,i.jsx)(P,{autoComplete:!0,isLoading:L,handle2FASignin:ee}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"border-dark-700 w-full border-b px-6 py-10 sm:px-10",children:(0,i.jsx)(f.default,{src:"/logo.svg",width:150,height:32,priority:!0,alt:"Denode logo"})}),(0,i.jsxs)("div",{className:"border-dark-700 flex w-full border-b px-6 py-7 sm:px-10",children:[(0,i.jsx)(v.Z,{borderColor:"dark.700",background:"transparent",size:"40px",icon:(0,i.jsx)(w.mB,{color:"dark.300"})}),(0,i.jsxs)("div",{className:"ml-3 w-full",children:[(0,i.jsx)("p",{className:"text-sm font-bold",children:(0,u.R6)()}),(0,i.jsx)("p",{className:"text-dark-300 text-sm",children:(0,i.jsx)(b.Z,{id:"page.body.signin.form.url.message"})})]})]}),(0,i.jsx)("div",{className:"w-full px-6 py-10 sm:px-10",children:(0,i.jsx)("form",{action:"submit",onSubmit:r(Y),children:(0,i.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,i.jsxs)(n.NI,{isInvalid:!!O.email,children:[(0,i.jsx)(s.l,{color:"light.900",children:(0,i.jsx)(b.Z,{id:"page.body.signin.form.email.label"})}),(0,i.jsx)(o.I,{variant:"outline",placeholder:F({id:"page.body.signin.form.email.placeholder"}),type:"email",size:"md",autoFocus:!0,"aria-invalid":O.email?"true":"false",...e("email",{required:Q("form.field.required"),pattern:{value:m.CU,message:Q("form.field.invalid_value")}})}),O.email&&(0,i.jsx)(a.J1,{children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.aN,{mr:"10px"}),O.email.message]})})]}),(0,i.jsxs)(n.NI,{isInvalid:!!O.password,children:[(0,i.jsx)(s.l,{color:"light.900",children:(0,i.jsx)(b.Z,{id:"page.body.signin.form.password.label"})}),(0,i.jsxs)(l.B,{children:[(0,i.jsx)(o.I,{variant:"outline",placeholder:F({id:"page.body.signin.form.password.placeholder"}),type:G?"text":"password",size:"md",...e("password",{required:Q("form.field.required")})}),(0,i.jsx)(c.x,{onClick:()=>J(!G),children:G?(0,i.jsx)(w.tp,{color:"dark.300",_hover:{color:"light.900"}}):(0,i.jsx)(w.ON,{color:"dark.300",_hover:{color:"light.900"}})})]}),O.password&&(0,i.jsx)(a.J1,{children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.aN,{mr:"10px"}),O.password.message]})})]})]}),(0,i.jsx)(x.default,{className:"text-primary-500 hover:underline focus:text-white focus:underline",href:"/".concat("en"===R?"":"".concat(R,"/"),"forgot-password"),children:(0,i.jsx)(b.Z,{id:"page.body.signin.form.forgot_password_link"})}),(0,i.jsx)(d.z,{variant:"solid",colorScheme:"primary",size:"lg",width:"100%",type:"submit",isDisabled:L,isLoading:L,children:(0,i.jsx)("h1",{children:(0,i.jsx)(b.Z,{id:"button.login"})})}),(0,i.jsxs)("p",{className:"text-dark-300 text-center",children:[(0,i.jsx)(b.Z,{id:"page.body.signin.form.no_account_yet"}),"\xa0",(0,i.jsx)(x.default,{className:"focus:text-primary-500 text-white hover:underline focus:underline",href:"/".concat("en"===R?"":"".concat(R,"/"),"register"),children:(0,i.jsx)(b.Z,{id:"page.body.signin.form.sign_up"})})]})]})})})]})})}},87975:function(e,r,t){"use strict";t.d(r,{Uw:function(){return n},ZH:function(){return i},kO:function(){return s}});let i=e=>e.user.auth.current_password_entropy,n=e=>e.user.auth.require2FA,s=e=>e.user.auth.requireVerification},3614:function(e,r,t){"use strict";t.d(r,{x:function(){return i}});let i=e=>e.public.configs.data},26025:function(e,r,t){"use strict";t.d(r,{A:function(){return i}});let i=e=>e.public.i18n.lang},40609:function(e,r,t){"use strict";var i=t(30098),n=t(76368);t(22103),r.Z=e=>{let{background:r="dark.700",borderColor:t="light.900",icon:s,size:o,...a}=e;return(0,i.jsx)(n.xu,{display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",background:r,boxSize:o,minW:o,minH:o,borderWidth:"1px",borderColor:t,outline:"none",...a,children:s})}},90876:function(e,r,t){"use strict";var i=t(30098),n=t(34483),s=t(76727),o=t(83334),a=t(77097),l=t(45385),c=t(98229),d=t(56063),u=t(22103),m=t(35507);r.Z=e=>{let{shouldAutoFocus:r=!0,hasResendButton:t=!1,hasCancelButton:f,hasContinueButton:x,disabledContinueButton:p=!1,cancelText:h,isOpen:g,inputTestRegex:y,continueButtonText:j,autoComplete:b=!1,children:v,isLoadingContinue:w,onSubmit:k,onResend:_,onCancel:N}=e,[q,C]=(0,u.useState)(""),[S,E]=(0,u.useState)(60);(0,u.useEffect)(()=>{let e=setInterval(()=>{S>0&&E(S-1)},1e3);return()=>{clearInterval(e)}},[S]);let Z=(0,u.useCallback)(e=>{e&&e.preventDefault(),k(q)},[k,q]);(0,u.useEffect)(()=>{6!==q.length||x||Z()},[q]),(0,u.useEffect)(()=>{E(60)},[g]);let O=e=>{let r=e.trim();return!y||y.test(r)},P=e=>{O(e)&&C(e)};for(let e of Array.from(document.getElementsByClassName("chakra-pin-input")))e.setAttribute("autocomplete","off");let z=0===S;return(0,i.jsx)("form",{onSubmit:Z,autoComplete:"off",children:(0,i.jsxs)(n.K,{direction:"column",spacing:8,children:[(0,i.jsxs)(s.NI,{children:[(0,i.jsx)(o.l,{color:"light.900",children:(0,i.jsx)(m.Z,{id:"page.body.settings.kyc.phone.form.verification_code.label"})}),(0,i.jsx)(a.U,{justify:"space-between",color:"white",spacing:1,children:(0,i.jsxs)(l.E,{colorScheme:"dark.900",placeholder:"",otp:!0,size:{base:"sm",sm:"md",md:"lg"},onChange:e=>P(e),onComplete:e=>{b&&6===e.length&&!w&&k(e)},children:[(0,i.jsx)(l.x,{autoFocus:r}),(0,i.jsx)(l.x,{}),(0,i.jsx)(l.x,{}),(0,i.jsx)(l.x,{}),(0,i.jsx)(l.x,{}),(0,i.jsx)(l.x,{})]})})]}),v,(0,i.jsxs)(c.g,{spacing:"3",children:[t&&void 0!==_&&(0,i.jsxs)(d.z,{colorScheme:"primary",variant:z?"solid":"outlinePrimary",size:"lg",width:"100%",isDisabled:S>0,onClick:()=>{_(),E(60)},children:[(0,i.jsx)(m.Z,{id:z?"button.send":"button.resend_in"}),!z&&(0,i.jsxs)("span",{className:"text-white",children:["\xa0",S,"\xa0",(0,i.jsx)(m.Z,{id:"time.sec"})]})]}),(x||j)&&(0,i.jsxs)(d.z,{colorScheme:"primary",color:"white",variant:"solid",size:"lg",width:"100%",isLoading:w,isDisabled:q.length<6||p,type:"submit",children:[j||(0,i.jsx)(m.Z,{id:"button.continue"})," "]}),f&&(0,i.jsx)(d.z,{variant:"outline",size:"lg",width:"100%",onClick:N,children:(0,i.jsx)(m.Z,{id:h||"button.cancel"})})]})]})})}},75062:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var i=t(30098);t(22103);var n=t(35507);function s(e){return(0,i.jsx)(n.Z,{...e})}}},function(e){e.O(0,[31967,40514,43429,36530,50463,18667,38088,86531,52844,81918,57381,71739,39174,84909,1744],function(){return e(e.s=70933)}),_N_E=e.O()}]);